(function(e){var t=navigator.userAgent.toLowerCase(),n=Object.prototype.toString,r=/opera/.test(t),i=/\bchrome\b/.test(t),s=/webkit/.test(t),o=!i&&/safari/.test(t),u=!r&&/msie/.test(t),a=!!document.createElement("canvas").getContext,f=!s&&/gecko/.test(t),l=/ipod|ipad|iphone|android/gi.test(t),c=function(e,t,n,r){return n*e/r+t},h={easeIn:function(e,t,n,r){return n*(e/=r)*e*e+t},easeOut:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOut:function(e,t,n,r){return 1>(e/=r/2)?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}},p=function(e){var t=!1,v=!1,y=[],w=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",w,!1),S()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",w),S())}}(),E=function(){if(!t){try{document.documentElement.doScroll("left")}catch(e){setTimeout(E,1);return}
    S()}},S=function(){if(!t){t=!0;for(var e=0;e<y.length;e++)y[e].call(document);y=[]}},x=function(){if(!v){v=!0;if("complete"===document.readyState)return setTimeout(S,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",w,!1),e.addEventListener("load",S,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",w),e.attachEvent("onload",S);var t=!1;try{t=null==e.frameElement}catch(n){}
    document.documentElement.doScroll&&t&&E()}}},T=function(e){x(),t?e.call(document,N):y.push(function(){return e.call(this)})},N=function(e){if(!e||e.nodeType)return e;if("string"==typeof e)return-1!=e.indexOf("#")&&(e=e.substring(1)),document.getElementById(e);"function"==typeof e&&T(e)};N.apply=function(e,t){if(e&&t&&"object"==typeof t)for(var n in t)"undefined"!=typeof t[n]&&(e[n]=t[n]);if(!t&&e){var r={};for(n in e)r[n]=e[n];return r}
    return e},N.apply(N,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(e,t){return null===e||void 0===e||N.isArray(e)&&!e.length||(t?!1:""===e)},isArray:function(e){return"[object Array]"===n.apply(e)},isDate:function(e){return"[object Date]"===n.apply(e)},isObject:function(e){return!!e&&"[object Object]"===n.apply(e)},isFunction:function(e){return"[object Function]"===n.apply(e)},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isFalse:function(e){return"boolean"==typeof e&&!e},isElement:function(e){return e?!!e.tagName:!1},isDefined:function(e){return"undefined"!=typeof e}}),N.applyIf=function(e,t){if(e&&N.isObject(t))for(var n in t)N.isDefined(t[n])&&!N.isDefined(e[n])&&(e[n]=t[n]);return!t&&e?N.apply(e):e},N.merge=function(e,t,n){if(e&&N.isObject(t)){for(var r in t)N.isDefined(t[r])&&(N.isObject(t[r])?N.isObject(e[r])?N.merge(e[r],t[r]):e[r]=N.clone(t[r],!0):e[r]=t[r]);if(N.isObject(n))return N.merge(e,n)}
    return e},N.clone=function(e,t,n){var r={};if(N.isArray(e)&&N.isObject(t))for(var i=0;i<e.length;i++)r[e[i]]=n&&N.isObject(t[e[i]])?N.clone(t[e[i]],n):t[e[i]];else if(N.isObject(e))for(i in e)r[i]=t&&N.isObject(e[i])&&!e[i].ICHARTJS_OBJECT?N.clone(e[i],t):e[i];return r},N.override=function(e,t){if(e&&t){var n=e.prototype;N.apply(n,t),N.isIE&&t.hasOwnProperty("toString")&&(n.toString=t.toString)}},N.extend=function(){var e=function(e){for(var t in e)this[t]=e[t]},t=Object.prototype.constructor;return function(n,r){var i=function(){n.apply(this,arguments)},s=function(){},o=n.prototype;return s.prototype=o,s=i.prototype=new s,s.constructor=i,i.superclass=o,o.constructor==t&&(o.constructor=n),i.override=function(e){N.override(i,e)},s.superclass=s.supr=function(){return o},s.override=e,N.override(i,r),i.extend=function(e){return N.extend(i,e)},i.plugin_={},i.plugin=function(e,t){N.isString(e)&&N.isFunction(t)&&(i.plugin_[e]=t)},i}}();var C=Math.sin,L=Math.cos,A=Math.atan,O=Math.sqrt,M=Math.abs,_=Math.PI,D=2*_,P=Math.ceil,H=Math.round,B=Math.floor,F=Math.max,I=Math.min,q=parseFloat,R={},U={},z=function(e,t){if(0==e)return e;var n=M(e),r=.1;if(1<n){for(;1<n;)n/=10,r*=10;return B(e/r+t)*r}
    for(r=1;1>n;)n*=10,r*=10;return H(e*r+t)/r},W={white:"rgb(255,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",yellow:"rgb(255,255,0)",black:"rgb(0,0,0)"},X=function(e){var t=/rgb\((\w*),(\w*),(\w*)\)/.exec(e);if(t)return[t[1],t[2],t[3]];if(t=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(e))return[t[1],t[2],t[3],t[4]];throw Error("invalid colors value '"+e+"'")},V=function(e){if(!e)return e;e=e.replace(/\s/g,"").toLowerCase();if(/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(e)||/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)$/.exec(e))return e;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(e))return e=e.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),(7==e.length?"rgba(":"rgb(")+parseInt(e.substring(0,2),16)+","+parseInt(e.substring(2,4),16)+","+parseInt(e.substring(4,6),16)+(7==e.length?",0."+e.substring(6,7)+")":")");if(W[e])return W[e];throw Error("invalid colors value '"+e+"'")},$=function(e,t){return t=t||.14,.5<e?t-(1-e)/10:.1<e?t-.16+e/5:e>t?t:e/2},J=function(e,t,n,r){if(!t)return t;var t=X(V(t)),i;i=t;var s=void 0,o=void 0;N.isArray(i)&&(s=i[1],o=i[2],i=i[0]),i/=255;var s=s/255,o=o/255,u=F(F(i,s),o),a=I(I(i,s),o),a=u-a;if(0==a)i=[0,0,u];else{var f;i==u?f=(s-o)/a:s==u?f=(o-i)/a+2:o==u&&(f=(i-s)/a+4),f*=60,0>f&&(f+=360),i=[f,a/u,u]}
    i[1]-=0!=r?r||.05:r,e?(i[2]-=$(i[2],n),i[1]=N.upTo(i[1],1),i[2]=N.lowTo(i[2],0)):(i[2]+=$(1-i[2],n),i[1]=N.lowTo(i[1],0),i[2]=N.upTo(i[2],1)),r=t[3],e=t=void 0,N.isArray(i)&&(e=r,r=i[1],t=i[2],i=i[0]);var l,c,h,n=B(i/60)%6,o=i/60-n;i=t*(1-r),s=t*(1-r*o),r=t*(1-r*(1-o));switch(n){case 0:l=t,c=r,h=i;break;case 1:l=s,c=t,h=i;break;case 2:l=i,c=t,h=r;break;case 3:l=i,c=s,h=t;break;case 4:l=r,c=i,h=t;break;case 5:l=t,c=i,h=s}
    return"rgb"+(e?"a":"")+"("+H(255*l)+","+H(255*c)+","+H(255*h)+(e?","+e+")":")")};return N.apply(N,{getFont:function(e,t,n,r){return e+" "+t+(r||"px")+" "+n},getDoc:function(){return e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document},DefineAbstract:function(e,t){if(!t[e])throw Error("Cannot instantiate the type '"+t.type+"'.you must implements it with method '"+e+"'.")},getAA:function(e){return"linear"==e?c:"easeInOut"==e||"easeIn"==e||"easeOut"==e?h[e]:c},noConflict:function(){return p},plugin:function(e,t,n){N.isFunction(e)&&e.plugin(t,n)},parsePadding:function(e,t){return e=e||0,N.isNumber(e)?[e,e,e,e]:N.isArray(e)?e:(t=t||0,e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(","),1==e.length?e[0]=e[1]=e[2]=e[3]=q(e[0])||t:2==e.length?(e[0]=e[2]=q(e[0])||t,e[1]=e[3]=q(e[1])||t):3==e.length?(e[0]=q(e[0])||t,e[1]=e[3]=q(e[1])||t,e[2]=q(e[2])||t):(e[0]=q(e[0])||t,e[1]=q(e[1])||t,e[2]=q(e[2])||t,e[3]=q(e[3])||t),e)},distanceP2P:function(e,t,n,r){return O((n-e)*(n-e)+(r-t)*(r-t))},atan2Radian:function(e,t,n,r){if(e==n)return r>t?_/2:3*_/2;if(t==r)return n>e?0:_;var i=N.quadrant(e,t,n,r),e=A(M((t-r)/(e-n)));return i?(3==i?D:_)+(2==i?e:-e):e},angle2Radian:function(e){return e*_/180},radian2Angle:function(e){return 180*e/_},quadrant:function(e,t,n,r){return e<n?t<r?0:3:t<r?1:2},toPI2:function(e){for(;0>e;)e+=D;return e},visible:function(e,t,n){if(e>=t)return[];var r=N.quadrantd(e),i=N.quadrantd(t);if(2!=r&&3!=r||2!=i&&3!=i||!(t-e<_)){e=N.toPI2(e),t=N.toPI2(t),t<=e&&(t+=D);if(e>_)e=D;else{if(t>D)return[{s:e,e:_,f:n},{s:D,e:t,f:n}];t>_&&(t=_)}
    return{s:e,e:t,f:n}}
    return[]},quadrantd:function(e){if(0==e)return 0;if(0==e%D)return 3;for(;0>e;)e+=D;return P(2*(e%D)/_)-1},upTo:function(e,t){return t>e?e:t},lowTo:function(e,t){return t<e?e:t},between:function(e,t,n){return e>t?N.between(t,e,n):n>t?t:n<e?e:n},inRange:function(e,t,n){return t>n&&e<n},angleInRange:function(e,t,n){return n-=e,n=0>n?n+D:n,n%=D,t-e>n},angleZInRange:function(e,t,n){return t<e?n>e||n<t:t>n&&e<n},inRangeClosed:function(e,t,n){return t>=n&&e<=n},inEllipse:function(e,t,n,r){return 1>=e*e/n/n+t*t/r/r},p2Point:function(e,t,n,r){return{x:e+L(n)*r,y:t+C(n)*r}},toRgb:V,toRgba:function(e,t){var n=X(V(e));return"rgba("+n[0]+","+n[1]+","+n[2]+","+t+")"},vectorP2P:function(e,t,n){return n||(t=N.angle2Radian(t),e=N.angle2Radian(e)),t=C(t),{x:t*C(e),y:t*L(e)}},uid:function(e){return(e||"ichartjs")+"_"+P(1e4*Math.random())+(new Date).getTime().toString().substring(4)},register:function(e){if(N.isString(e))U[e.toLowerCase()]=e;else{var t=e.get("id");if(!t||""==t){for(t=N.uid(e.type);R[t];)t=N.uid(e.type);e.push("id",t)}
    R[t],e.id=t,R[t]=e}},create:function(e){if(!e.type||!U[e.type])throw Error("TypeNotFoundException["+e.type+"]");return new N[U[e.type]](e)},get:function(e){return R[e]},isPercent:function(e){return N.isString(e)&&e.match(/(.*)%/)},parsePercent:function(e,t){return N.isString(e)&&(e=e.match(/(.*)%/))&&(e=t?B(q(e[1])*t/100):e[1]/100),!e||0>=e||e>t?t:e},parseFloat:function(e,t){if(!N.isNumber(e)&&(e=q(e),!N.isNumber(e)))throw Error("["+t+"]="+e+"is not a valid number.");return e},ceil:function(e){return z(e,1)},floor:function(e){return z(e,-1)},_2D:"2d",_3D:"3d",light:function(e,t,n){return J(!1,e,t,n)},dark:function(e,t,n){return J(!0,e,t,n)},fixPixel:function(e){return N.isNumber(e)?e:q(e.replace("px",""))||0},toPixel:function(e){return N.isNumber(e)?e+"px":N.fixPixel(e)+"px"},emptyFn:function(){return!0},supportCanvas:a,isOpera:r,isWebKit:s,isChrome:i,isSafari:o,isIE:u,isGecko:f,isMobile:l,touch:"ontouchend"in document,FRAME:l?30:60}),N.Assert={isTrue:function(e,t){if(!0!==e)throw Error(t)}},N.requestAnimFrame=function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)};return function(e){t(e)}}(),N.Event={addEvent:function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},fix:function(t){"undefined"==typeof t&&(t=e.event);var n={target:t.target,pageX:t.pageX,pageY:t.pageY,offsetX:t.offsetX,offsetY:t.offsetY,stopPropagation:!1,event:t};if("undefined"==typeof t.offsetX){t.target||(n.target=t.srcElement||document),t.targetTouches&&(n.pageX=t.targetTouches[0].pageX,n.pageY=t.targetTouches[0].pageY);if(null==n.pageX&&null!=t.clientX){var r=document.documentElement,i=document.body;n.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),n.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)}
    for(var i=r=0,s=t.target;s!=document.body&&s;)r+=s.offsetLeft-(s.scrollLeft||0),i+=s.offsetTop,s=s.offsetParent;n.offsetX=n.pageX-r,n.offsetY=n.pageY-i}
    return n.x=n.offsetX,n.y=n.offsetY,t.stopPropagation||(t.stopPropagation=function(){e.event.cancelBubble=!0}),n}},N}(e);Array.prototype.each=function(e,t){for(var n=this.length,r,i=0;i<n&&(r=t?e.call(t,this[i],i):e(this[i],i),"boolean"!=typeof r||!!r);i++);return this},Array.prototype.eachAll=function(e,t){this.each(function(n,r){return p.isArray(n)?n.eachAll(e,t):t?e.call(t,n,r):e(n,r)},t)},Array.prototype.sor=function(e){for(var t=this.length-1,n,r=0;r<t;r++)for(var i=t;i>r;i--)if(e?!e(this[i],this[i-1]):this[i]<this[i-1])n=this[i],this[i]=this[i-1],this[i-1]=n},e.iChart=p,e.$||(e.$=e.iChart)})(window),function(e){e.Element=function(t){var n=this._();n.type="element",n.ICHARTJS_OBJECT=!0,e.DefineAbstract("configure",n),e.DefineAbstract("afterConfiguration",n),n.options={},n.set({border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0}),n.W="width",n.H="height",n.O="top",n.B="bottom",n.L="left",n.R="right",n.C="center",n.X="originx",n.Y="originy",n.variable={},n.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]},n.registerEvent("initialize"),n.initialization=!1,n.configure.apply(n,Array.prototype.slice.call(arguments,1)),n.default_=e.clone(n.options,!0),n.set(t),n.afterConfiguration(n)},e.Element.prototype={_:function(){return this},afterConfiguration:function(t){if(e.isObject(t.get("listeners")))for(var n in t.get("listeners"))t.on(n,t.get("listeners")[n]);t.initialize(),t.fireEvent(t,"initialize",[t])},registerEvent:function(){for(var e=0;e<arguments.length;e++)this.events[arguments[e]]=[]},fireString:function(t,n,r,i){return t=this.fireEvent(t,n,r),e.isString(t)?t:!0!==t&&e.isDefined(t)?t.toString():i},fireEvent:function(e,t,n){var r=this.events[t].length;if(1==r)return this.events[t][0].apply(e,n);for(var i=!0,s=0;s<r;s++)this.events[t][s].apply(e,n)||(i=!1);return i},on:function(t,n){return e.isString(t)&&e.isArray(this.events[t])?this.events[t].push(n):e.isArray(t)&&t.each(function(e){this.on(e,n)},this),this},getPlugin:function(e){return this.constructor.plugin_[e]},set:function(t){e.isObject(t)&&e.merge(this.options,t)},pushIf:function(t,n){return!e.isDefined(this.get(t))||null==this.get(t)?this.push(t,n):this.get(t)},push:function(e,t){for(var n=e.split("."),r=n.length-1,i=this.options,s=0;s<r;s++)i[n[s]]||(i[n[s]]={}),i=i[n[s]];return i[n[r]]=t},get:function(e){for(var e=e.split("."),t=this.options[e[0]],n=1;n<e.length;n++){if(!t)return null;t=t[e[n]]}
    return t}},e.Painter=e.extend(e.Element,{configure:function(){this.type="painter",this.dimension=e._2D,e.DefineAbstract("commonDraw",this),e.DefineAbstract("initialize",this),this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:null,originy:null}),this.variable.event={mouseover:!1},this.variable.animation={},this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==e._3D},applyGradient:function(e,t,n,r){var i=this._();i.get("gradient")&&i.get("f_color")&&(i.push("f_color",i.T.gradient(e||i.x||0,t||i.y||0,n||i.get(i.W),r||i.get(i.H),[i.get("dark_color"),i.get("light_color")],i.get("gradient_mode"))),i.push("light_color",i.T.gradient(e||i.x||0,t||i.y||0,n||i.get(i.W),r||i.get(i.H),[i.get("background_color"),i.get("light_color")],i.get("gradient_mode"))),i.push("f_color_",i.get("f_color")))},draw:function(e,t){if(t)this.root.draw(e);else{if(!this.fireEvent(this,"beforedraw",[this,e]))return this;this.commonDraw(this,e),this.fireEvent(this,"draw",[this,e])}},inject:function(e){e&&(this.root=e,this.target=this.T=e.T)},doConfig:function(){var t=this._(),n=e.parsePadding(t.get("padding")),r=t.get("border.enable"),r=r?e.parsePadding(t.get("border.width")):[0,0,0,0],i=e.toRgb(t.get("background_color")),s=t.get("color_factor"),o=t.get("gradient")?0:null;t.set({border_top:r[0],border_right:r[1],border_bottom:r[2],border_left:r[3],hborder:r[1]+r[3],vborder:r[0]+r[2],padding_top:n[0]+r[0],padding_right:n[1]+r[1],padding_bottom:n[2]+r[2],padding_left:n[3]+r[3],hpadding:n[1]+n[3]+r[1]+r[3],vpadding:n[0]+n[2]+r[0]+r[2]}),!0===t.get("shadow")&&t.push("shadow",{color:t.get("shadow_color"),blur:t.get("shadow_blur"),offsetx:t.get("shadow_offsetx"),offsety:t.get("shadow_offsety")}),t.push("f_color",i),t.push("f_color_",i),t.push("light_color",e.light(i,s,o)),t.push("dark_color",e.dark(i,.8*s,o)),t.push("light_color2",e.light(i,2*s,o)),t.is3D()&&!t.get("xAngle_")&&(n=e.vectorP2P(t.get("xAngle"),t.get("yAngle")),t.push("xAngle_",n.x),t.push("yAngle_",n.y))}}),e.Html=e.extend(e.Element,{configure:function(t){this.type="html",this.T=t,e.DefineAbstract("beforeshow",this),this.set({animation:!0,default_action:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0}),this.transitions=""},initialize:function(){var e=this._();e.wrap=e.get("wrap"),e.dom=document.createElement("div"),e.get("shadow")&&e.css("boxShadow",e.get("shadow_offsetx")+"px "+e.get("shadow_offsety")+"px "+e.get("shadow_blur")+"px "+e.get("shadow_color")),e.get("border.enable")&&(e.css("border",e.get("border.width")+"px "+e.get("border.style")+" "+e.get("border.color")),e.css("borderRadius",e.get("border.radius")+"px")),e.css("position","absolute"),e.css("zIndex",e.get("index")),e.applyStyle(),e.wrap.appendChild(e.dom),e.style=e.dom.style,e.get("default_action")&&e.doAction(e)},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(t,n){var r="transitionend";e.isWebKit?r="webkitTransitionEnd":e.isOpera&&(r="oTransitionEnd"),e.Event.addEvent(this.dom,r,t,n)},destroy:function(){this.wrap.removeChild(this.dom),this.dom=null},transition:function(t){this.transitions=""==this.transitions?t:this.transitions+","+t,e.isWebKit?this.css("WebkitTransition",this.transitions):e.isGecko?this.css("MozTransition",this.transitions):e.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},beforeshow:function(e,t,n){n.follow(e,t,n)},show:function(e,t){this.beforeshow(e,t,this),this.css("visibility","visible"),this.get("animation")&&this.css("opacity",1)},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(t,n){if(e.isString(t)){if(!e.isDefined(n))return this.dom.style[t];this.dom.style[t]=n}},applyStyle:function(){for(var e=this.get("style").split(";"),t,n=0;n<e.length;n++)t=e[n].split(":"),1<t.length&&this.css(t[0],t[1])}}),e.Component=e.extend(e.Painter,{configure:function(t){e.Component.superclass.configure.apply(this,arguments),this.type="component",this.set({fontsize:12,font:"Verdana",fontweight:"normal",fontunit:"px",tip:{enable:!1,border:{width:2}}}),this.ICHARTJS_CHART=this.proxy=this.atomic=!1,this.inject(t)},initialize:function(){e.DefineAbstract("isEventValid",this),e.DefineAbstract("doDraw",this),this.doConfig(),this.initialization=!0},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},destroy:function(){this.tip&&this.tip.destroy()},doConfig:function(){e.Component.superclass.doConfig.call(this);var t=this._(),n=t.get(t.W),r=t.get("maxwidth"),i=t.get(t.X);if(n&&r&&(n=t.push(t.W,e.parsePercent(n,r)),n>r&&(n=t.push("width",r)),r>n)){var s=t.get("align")||t.C;s==t.C?i+=(r-n)/2:s==t.R&&(i+=r-n)}
    t.x=t.push(t.X,i+t.get("offsetx")),t.y=t.push(t.Y,t.get(t.Y)+t.get("offsety")),t.push("fontStyle",e.getFont(t.get("fontweight"),t.get("fontsize"),t.get("font"),t.get("fontunit"))),t.data=t.get("data"),t.get("tip.enable")&&(t.pushIf("tip.border.color",t.get("f_color")),e.isFunction(t.get("tip.invokeOffset"))||t.push("tip.invokeOffset",t.tipInvoke()))},isMouseOver:function(e){return this.isEventValid(e,this)},redraw:function(e){this.root.draw(e,this.root.Combination)},last:e.emptyFn,commonDraw:function(e){e.proxy||e.doDraw.call(e,e)}}),e.Tip=e.extend(e.Html,{configure:function(){e.Tip.superclass.configure.apply(this,arguments),this.type="tip",this.set({name:"",index:0,value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200}),this.registerEvent("parseText")},position:function(e,t,n){n.style.top=(0>e?0:e)+"px",n.style.left=(0>t?0:t)+"px"},follow:function(t,n,r){r.get("invokeOffsetDynamic")?n.hit&&((e.isString(n.text)||e.isNumber(n.text))&&r.text(n.name,n.value,n.text,n.i,r),t=r.get("invokeOffset")(r.width()/3,r.height(),n),r.position(t.top,t.left,r)):"follow"!=r.get("showType")&&e.isFunction(r.get("invokeOffset"))?(t=r.get("invokeOffset")(r.width(),r.height(),n),r.position(t.top,t.left,r)):r.position(t.y-1.1*r.height()-2,t.x+2,r)},text:function(e,t,n,r,i){i.dom.innerHTML=i.fireString(i,"parseText",[i,e,t,n,r],n)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},doAction:function(e){e.T.on("mouseover",function(t,n,r){e.show(n,r)}).on("mouseout",function(t,n){e.hidden(n)}),"follow"==e.get("showType")&&e.T.on("mousemove",function(t,n,r){e.T.variable.event.mouseover&&setTimeout(function(){e.T.variable.event.mouseover&&e.follow(n,r,e)},e.get("delay"))})},initialize:function(){e.Tip.superclass.initialize.call(this);var t=this._();t.text(t.get("name"),t.get("value"),t.get("text"),t.get("index"),t),t.hidden();if(t.get("animation")){var n=t.get("move_duration")/1e3+"s "+t.get("timing_function")+" 0s";t.transition("opacity "+t.get("fade_duration")/1e3+"s "+t.get("timing_function")+" 0s"),t.transition("top "+n),t.transition("left "+n),t.onTransitionEnd(function(){0==t.css("opacity")&&t.css("visibility","hidden")},!1)}}}),e.CrossHair=e.extend(e.Html,{configure:function(){e.CrossHair.superclass.configure.apply(this,arguments),this.type="crosshair",this.set({top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(e,t,n){n.get("invokeOffset")?(e=n.get("invokeOffset")(e,t))&&e.hit?(n.o_valid=!0,n.position(e.top-n.top,e.left-n.left,n)):(!e||!n.o_valid)&&n.position(n.owidth,n.oheight,n):n.position(e.y-n.top-1,e.x-n.left-1,n)},position:function(e,t,n){n.horizontal.style.top=e-n.size+"px",n.vertical.style.left=t-n.size+"px"},doCreate:function(t,n,r){var i=document.createElement("div");return i.style.width=e.toPixel(n),i.style.height=e.toPixel(r),i.style.backgroundColor=t.get("line_color"),i.style.position="absolute",t.dom.appendChild(i),i},doAction:function(e){e.T.on("mouseover",function(t,n,r){e.show(n,r)}).on("mouseout",function(t,n,r){e.hidden(n,r)}).on("mousemove",function(t,n,r){e.follow(n,r,e)})},initialize:function(){e.CrossHair.superclass.initialize.call(this);var t=this._(),n=e.toPixel(t.get("line_width"));t.size=t.get("line_width")/2,t.top=e.fixPixel(t.get(t.O)),t.left=e.fixPixel(t.get(t.L)),t.owidth=-t.T.root.width,t.oheight=-t.T.root.height,t.o_valid=!1,t.css("width","0px"),t.css("height","0px"),t.css("top",t.top+"px"),t.css("left",t.left+"px"),t.css("visibility","hidden"),t.horizontal=t.doCreate(t,t.get("hcross")?e.toPixel(t.get(t.W)):"0px",n),t.vertical=t.doCreate(t,n,t.get("vcross")?e.toPixel(t.get(t.H)):"0px")}}),e.Legend=e.extend(e.Component,{configure:function(){e.Legend.superclass.configure.apply(this,arguments),this.type="legend",this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:10,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"}),this.atomic=!0,this.registerEvent("parse")},isEventValid:function(e,t){var n={valid:!1};return e.x>this.x&&e.x<t.x+t.width&&e.y>t.y&&e.y<t.y+t.height&&t.data.each(function(r,i){if(e.x>r.x&&e.x<r.x+r.width_+t.get("signwidth")&&e.y>r.y&&e.y<r.y+t.get("line_height"))return n={valid:!0,index:i,target:r},!1},t),n},drawCell:function(e,t,n,r,i,s){var o=s.get("sign_size"),u=s.getPlugin("sign");if(!u||!u.call(s,s.T,i,{x:e+o/2,y:t},o,r))-1!=i.indexOf("bar")&&s.T.box(e,t-o/12,o,o/6,0,r),"round"==i?s.T.round(e+o/2,t,o/2,r):"round-bar"==i?s.T.round(e+o/2,t,o/4,r):"square-bar"==i?s.T.box(e+o/4,t-o/4,o/2,o/2,0,r):"square"==i&&s.T.box(e,t-o/2,o,o,0,r);s.T.fillText(n,e+s.get("signwidth"),t,0,s.get("text_with_sign_color")?r:s.get("color"),"lr",s.get("line_height"))},doDraw:function(t){t.T.box(t.x,t.y,t.width,t.height,t.get("border"),t.get("f_color"),!1,t.get("shadow")),t.T.textStyle(t.L,"middle",e.getFont(t.get("fontweight"),t.get("fontsize"),t.get("font"))),t.data.each(function(e){t.drawCell(e.x,e.y,e.text,e.color,e.sign,t)})},doLayout:function(t,n){var r=t.get("sign_size"),i=0,s=0,o=0,u=t.get("column"),a=t.get("row"),f=t.data.length;t.T.textFont(t.get("fontStyle")),t.get("line_height")<r&&t.push("line_height",r+r/5),t.push("signwidth",r+t.get("sign_space")),t.data.each(function(e){e.width_=t.T.measureText(e.text)},t);for(var l=0;l<u;l++){for(var o=0,h=l;h<f;h+=u)o=Math.max(o,t.data[h].width_);t.columnwidth[l]=o,i+=o}
    for(l=0;l<a;l++){o=0;for(h=l*u;h<f;h++)o=Math.max(o,t.data[h].text.split("\n").length);t.columnheight[l]=o,s+=o}
    i=t.push(t.W,i+t.get("hpadding")+t.get("signwidth")*u+(u-1)*t.get("legend_space"));if(i>t.get("maxwidth")&&(r=Math.floor(t.get("fontsize")*(t.get("maxwidth")/i)),!(10>r&&1==u))){9<r?t.push("fontStyle",e.getFont(t.get("fontweight"),t.push("fontsize",r),t.get("font"))):1<u&&t.push("row",Math.ceil(f/t.push("column",u-1))),t.doLayout(t,n);return}
    var p;t.width=i,t.height=s=t.push(t.H,s*t.get("line_height")+t.get("vpadding")),t.y=t.get("valign")==t.O?n.get("t_originy"):t.get("valign")==t.B?n.get("b_originy")-s:n.get("centery")-s/2,t.x=t.get("align")==t.L?n.get("l_originx"):t.get("align")==t.C?n.get("centerx")-i/2:n.get("r_originx")-i,t.x=t.push(t.X,(0>t.x?n.get("l_originx"):t.x)+t.get("offsetx")),t.y=t.push(t.Y,(0>t.y?n.get("t_originy"):t.y)+t.get("offsety")),o=t.y+t.get("padding_top"),r=t.get("legend_space")+t.get("signwidth");for(l=0;l<a;l++){s=t.x+t.get("padding_left"),p=t.columnheight[l]/2*t.get("line_height"),o+=p;for(h=0;h<u&&l*u+h<f;h++)i=t.data[l*u+h],i.y=o,i.x=s,s+=t.columnwidth[h]+r;o+=p}},doConfig:function(){e.Legend.superclass.doConfig.call(this);var t=this._(),n=t.root,r=e.isNumber(t.get("column")),i=e.isNumber(t.get("row")),s=t.data.length;t.get("align")==t.C&&"middle"==t.get("valign")&&t.push("valign",t.O),n.get("align")==t.L&&"middle"==t.get("valign")&&t.push("align",t.R),t.data.each(function(n,r){e.merge(n,t.fireEvent(t,"parse",[t,n.name,r])),n.text=n.text||n.name||"",n.sign=n.sign||t.get("sign")},t),!r&&!i&&(r=t.push("column",1)),r&&!i&&(i=t.push("row",Math.ceil(s/t.get("column")))),!r&&i&&(r=t.push("column",Math.ceil(s/t.get("row")))),r=t.get("column"),i=t.get("row"),s>i*r&&(i+=Math.ceil((s-i*r)/r),i=t.push("row",i)),t.columnwidth=[],t.columnheight=[],t.doLayout(t,n)}}),e.Label=e.extend(e.Component,{configure:function(){e.Label.superclass.configure.apply(this,arguments),this.type="label",this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1}),this.atomic=!0,this.registerEvent()},isEventValid:function(t,n){return{valid:e.inRange(n.labelx,n.labelx+n.get(n.W),t.x)&&e.inRange(n.labely,n.labely+n.get(n.H),t.y)}},text:function(e){e&&this.push("text",e),this.push(this.W,this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(e){var t=e.get("quadrantd"),n=e.get("line_points"),r=e.get("smooth"),t=1<=t&&2>=t,i=e.get("labelx"),s=e.get("labely");e.labelx=i+(t?-e.get(e.W)-r:r),e.labely=s-e.get(e.H)/2,n[2]={x:i,y:s},n[3]={x:n[2].x+(t?-r:r),y:n[2].y}},doLayout:function(e,t,n,r){r.push("labelx",r.get("labelx")+e/n),r.push("labely",r.get("labely")+t/n),r.get("line_points").each(function(n,r){return n.x+=e,n.y+=t,1==r},r),r.localizer(r)},doDraw:function(e){var t=e.get("line_points"),n=e.get("sign_size"),r=e.labelx+e.get("padding_left"),i=e.labely+e.get("padding_top");e.T.label(t,e.get("line_thickness"),e.get("border.color")),e.T.box(e.labelx,e.labely,e.get(e.W),e.get(e.H),e.get("border"),e.get("f_color"),!1,e.get("shadow")),e.T.textStyle(e.L,e.O,e.get("fontStyle")),t=e.get("color"),e.get("text_with_sign_color")&&(t=e.get("scolor")),"square"==e.get("sign")?e.T.box(r,i,n,n,0,e.get("scolor")):e.get("sign")&&e.T.round(r+n/2,i+n/2,n/2,e.get("scolor")),e.T.fillText(e.get("text"),r+n+e.get("sign_space"),i,e.get("textwidth"),t)},doConfig:function(){e.Label.superclass.doConfig.call(this);var t=this._();t.T.textFont(t.get("fontStyle")),t.get("fontsize")>t.get("line_height")&&t.push("line_height",t.get("fontsize")),t.get("sign")||(t.push("sign_size",0),t.push("sign_space",0)),t.push(t.H,t.get("line_height")+t.get("vpadding")),t.text(),t.localizer(t)}}),e.Text=e.extend(e.Component,{configure:function(){e.Text.superclass.configure.apply(this,arguments),this.type="text",this.set({text:"",textAlign:"center",align:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0}),this.registerEvent()},doDraw:function(e){e.get("box_feature")&&e.T.box(e.x,e.y,e.get(e.W),e.get(e.H),e.get("border"),e.get("f_color"));if(e.options.textAlign=="right"){e.options.textx=e.options.textx-40;}
    e.T.text(e.get("text"),e.get("textx"),e.get("texty"),e.get(e.W)-e.get("hpadding"),e.get("color"),e.get("textAlign"),e.get("textBaseline"),e.get("fontStyle"),e.get("writingmode"),e.get("line_height"),e.get("shadow"),e.get("rotate"));},isEventValid:function(){return{valid:!1}},doLayout:function(e,t,n,r){r.x=r.push(r.X,r.x+e),r.y=r.push(r.Y,r.y+t),r.push("textx",r.get("textx")+e),r.push("texty",r.get("texty")+t)},doConfig:function(){e.Text.superclass.doConfig.call(this);var t=this._(),n=t.x,r=t.y+t.get("padding_top"),i=t.get(t.W),s=t.get(t.H),o=t.get("textAlign"),n=n+(o==t.C?i/2:o==t.R?i-t.get("padding_right"):t.get("padding_left"));s&&(r+=s/2,t.push("textBaseline","middle")),t.push("textx",n),t.push("texty",r),t.push("box_feature",i&&s),t.applyGradient()}}),function(e){function t(t){"string"==typeof t&&(t=e(t));if(!t||!t.tagName||"canvas"!=t.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=t,this.c=this.canvas.getContext("2d")}
    var n=Math.PI,r=n/90,i=r/2,s=Math.ceil,o=Math.floor,u=2*n,a=Math.max,f=Math.min,l=Math.sin,c=Math.cos,h=function(e,t){return 1==e?o(t)+.5:Math.round(t)},p=function(e,t,n,r){var i=t.x,s=t.y,o=e[n-1],u=e[n+1],l,c;if(n<e.length-1){var e=o.y,n=u.y,h;l=(r*i+o.x)/(r+1),c=(r*s+e)/(r+1),u=(r*i+u.x)/(r+1),r=(r*s+n)/(r+1),h=(r-c)*(u-i)/(u-l)+s-r,c+=h,r+=h,c>e&&c>s?(c=a(e,s),r=2*s-c):c<e&&c<s&&(c=f(e,s),r=2*s-c),r>n&&r>s?(r=a(n,s),c=2*s-r):r<n&&r<s&&(r=f(n,s),c=2*s-r),t.rcx=u,t.rcy=r}
        return[o.rcx||o.x,o.rcy||o.y,l||i,c||s,i,s]},d=function(t){return e.isNumber(t)?t:e.parseFloat(t,t)},v=function(t,n){var r,i=0,s,o=0,u=!1,l=n.get("labels");n.data=t;if("simple"==n.dataType)n.total=0,t.each(function(t){t.background_color=t.color,i=t.value||0;if(e.isArray(i)){var l=0;o=i.length>o?i.length:o;for(var c=0;c<i.length;c++)i[c]=d(i[c]),l+=i[c],u||(r=s=i[c],u=!0),r=a(i[c],r),s=f(i[c],s);t.total=l}else i=d(i),t.value=i,n.total+=i,u||(r=s=i,u=!0),r=a(i,r),s=f(i,s)},n),e.isArray(l)&&(o=l.length>o?l.length:o),n.push("maxItemSize",o);else if("stacked"==n.dataType||"complex"==n.dataType){var c=l.length,h,p,v,m="stacked"==n.dataType;if(0==c)for(var c=t[0].value.length,g=0;g<c;g++)l.push("");n.columns=[];for(g=0;g<c;g++)h=[],p=0,t.each(function(n,o){if(i=n.value[g])n.value[g]=i=d(i,i),p+=i,m?v=t[o].color:(v=n.color,u||(r=s=i,u=!0),r=a(i,r),s=f(i,s)),h.push(e.applyIf({name:n.name,value:n.value[g],background_color:v,color:v},e.isArray(n.extra)?n.extra[g]||{}:n))}),m&&(u||(r=s=i,u=!0),r=a(p,r),s=f(p,s)),n.columns.push({total:p,name:l[g],item:h})}
        n.push("minValue",s),n.push("maxValue",r),n.doConfig(),n.initialization=!0};t.prototype={getContext:function(){return this.c},css:function(t,n){if(!e.isDefined(n))return this.canvas.style[t];this.canvas.style[t]=n},ellipse:function(e,t,n,i,s,o,u,a,f,h,p,d,v,g){v=!!v,this.save().gCo(g).strokeStyle(a,f,h).shadowOn(p).fillStyle(u).moveTo(e,t).beginPath();for(v&&this.moveTo(e,t);s<=o;)this.lineTo(e+n*c(s),t+i*l(s)),s+=r;return this.lineTo(e+n*c(o),t+i*l(o)).closePath().stroke(a).fill(u).restore()},arc:function(e,t,n,r,i,s,u,a,f,h,p,d,v,g){return a&&(n-=o(f/2)),0>=n?this:(this.save().gCo(g).strokeStyle(a,f,h).fillStyle(u).beginPath(),r?(this.moveTo(e+c(i)*(n-r),t+l(i)*(n-r)).lineTo(e+c(i)*n,t+l(i)*n),this.c.arc(e,t,n,i,s,d),this.lineTo(e+c(s)*(n-r),t+l(s)*(n-r)),this.c.arc(e,t,n-r,s,i,!d)):(this.c.arc(e,t,n,i,s,d),v&&this.lineTo(e,t)),this.closePath(),a?this.shadowOn(p).stroke(a).shadowOff().fill(u):this.shadowOn(p).fill(u),this.restore())},sector:function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){return l&&this.arc(e,t,n,r,i,s,o,u,a,f,l,c,!h,!p),this.arc(e,t,n,r,i,s,o,u,a,f,!1,c,!h)},sector3D:function(){var t=function(t,n,i,s,o,u,a,f,h){var a=function(e,r){this.lineTo(t+i*c(e),n+(r||0)+s*l(e))},p=o;for(this.fillStyle(e.dark(h)).moveTo(t+i*c(o),n+s*l(o)).beginPath();p<=u;)a.call(this,p),p+=r;a.call(this,u),this.lineTo(t+i*c(u),n+f+s*l(u));for(p=u;p>=o;)a.call(this,p,f),p-=r;a.call(this,o,f),this.lineTo(t+i*c(o),n+s*l(o)).closePath().fill(!0)},n=function(e,t,n,r,i,s,o,u){n=e+n*c(o),r=t+s+r*l(o),this.moveTo(e,t).beginPath().fillStyle(u).lineTo(e,t+s).lineTo(n,r).lineTo(n,r-s).lineTo(e,t).closePath().fill(!0)},i=function(t,r,i,s,o,u,a,f,l){var c=e.quadrantd(o),h=e.quadrantd(u),l=e.dark(l);(1==c||2==c)&&n.call(this,t,r,i,s,a,f,o,l),(0==h||3==h)&&n.call(this,t,r,i,s,a,f,u,l)},s=function(e,n,r,s,o,u,a,f,l,c,h,p,d){return this.ellipse(e,n+a,r,s,o,u,f,l,c,h,p,d,!0),i.call(this,e,n,r,s,o,u,d,a,f),this.ellipse(e,n,r,s,o,u,f,l,c,h,!1,d,!0),t.call(this,e,n,r,s,o,u,d,a,f),this};return s.layerPaint=i,s.sPaint=t,s.layerDraw=n,s}(),textStyle:function(e,t,n){return this.textAlign(e).textBaseline(t).textFont(n)},strokeStyle:function(e,t,n,r){return t*=3,e&&(t&&(this.c.lineWidth=t),n&&(this.c.strokeStyle=n),r)&&(this.c.lineJoin=r),this},globalAlpha:function(e){return e&&(this.c.globalAlpha=e),this},fillStyle:function(e){return e&&(this.c.fillStyle=e),this},arc2:function(e,t,n,r,i,s){return n&&this.c.arc(e,t,n,r,i,s),this},textAlign:function(e){return e&&(this.c.textAlign=e),this},textBaseline:function(e){return e&&(this.c.textBaseline=e),this},textFont:function(e){return e="600 30px veranda",e&&(this.c.font=e),this},shadowOn:function(e){return e&&(this.c.shadowColor=e.color,this.c.shadowBlur=e.blur,this.c.shadowOffsetX=e.offsetx,this.c.shadowOffsetY=e.offsety),this},shadowOff:function(){return this.c.shadowColor="white",this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0,this},gradient:function(e,t,n,r,i,s,o){var s=s.toLowerCase(),u=e,a=t,f=!s.indexOf("linear"),s=s.substring(14);if(f){switch(s){case"updown":a+=r;break;case"downup":t+=r;break;case"leftright":u+=n;break;case"rightleft":e+=n;break;default:return i[0]}
        return this.avgLinearGradient(e,t,u,a,i)}
        return e+=n/2,t+=r/2,this.avgRadialGradient(e,t,o||0,e,t,n>r?r:n,"outin"==s?i.reverse():i)},avgLinearGradient:function(e,t,n,r,i){e=this.createLinearGradient(e,t,n,r);for(t=0;t<i.length;t++)e.addColorStop(t/(i.length-1),i[t]);return e},createLinearGradient:function(e,t,n,r){return this.c.createLinearGradient(e,t,n,r)},avgRadialGradient:function(e,t,n,r,i,s,o){e=this.createRadialGradient(e,t,n,r,i,s);for(t=0;t<o.length;t++)e.addColorStop(t/(o.length-1),o[t]);return e},createRadialGradient:function(e,t,n,r,i,s){return this.c.createRadialGradient(e,t,n,r,i,s)},text:function(e,t,n,r,i,s,o,u,a,f,l,c){return this.save().textStyle(s,o,u).fillText(e,t,n,r,i,a,f,l,c).restore()},fillText:function(e,t,n,r,s,o,u,a,f){return e=e.toString(),!e||!e.length?this:(r=r||!1,o=o||"lr",u=u||16,t=h(0,t),n=h(0,n),e=e.split("tb"==o?"":"\n"),1<e.length&&("middle"==this.c.textBaseline?n-=(e.length-1)*u/2:"bottom"==this.c.textBaseline&&(n-=(e.length-1)*u)),this.save().fillStyle(s).translate(t,n).rotate(i*f).shadowOn(a),e.each(function(e,i){try{r&&0<r?this.c.fillText(e,0,i*u,r):this.c.fillText(e,0,i*u)}catch(s){console.log(s.message+"["+e+","+t+","+n+"]")}},this),this.restore())},measureText:function(e){var e=e.split("\n"),t=0;return e.each(function(e){t=a(this.measureText(e).width,t)},this.c),t},moveTo:function(e,t){return this.c.moveTo(e||0,t||0),this},lineTo:function(e,t){return this.c.lineTo(e||0,t||0),this},save:function(){return this.c.save(),this},restore:function(){return this.c.restore(),this},beginPath:function(){return this.c.beginPath(),this},closePath:function(){return this.c.closePath(),this},stroke:function(e){return e&&this.c.stroke(),this},fill:function(e){return e&&this.c.fill(),this},halion:function(e){var t=this.c.canvas.clientHeight;return gdt=this.c.createLinearGradient(0,0,0,t*3),gdt.addColorStop(0,"#2a8ee3"),gdt.addColorStop(.4,"#2a8ee3"),gdt.addColorStop(.7,"#f8f9f9"),gdt.addColorStop(.9,"#f8f9f9"),gdt.addColorStop(1,"#f7f8f9"),this.c.fillStyle=gdt,this},cube:function(t,n,r,i,s,o,u,a,f,l,c,p){return t=h(l,t),n=h(l,n),u=u&&0<u?u:s,i=n-u*i,r=h(l,t+u*r),i=h(l,i),p&&(this.polygon(a,f,l,c,p,!1,[{x:t,y:n},{x:r,y:i},{x:r+s,y:i},{x:t+s,y:n}]),this.polygon(a,f,l,c,p,!1,[{x:t,y:n},{x:t,y:n+o},{x:t+s,y:n+o},{x:t+s,y:n}]),this.polygon(a,f,l,c,p,!1,[{x:t+s,y:n},{x:r+s,y:i},{x:r+s,y:i+o},{x:t+s,y:n+o}])),this.polygon(e.dark(a),f,l,c,!1,!1,[{x:t,y:n},{x:r,y:i},{x:r+s,y:i},{x:t+s,y:n}]),this.polygon(a,f,l,c,!1,!1,[{x:t,y:n},{x:t,y:n+o},{x:t+s,y:n+o},{x:t+s,y:n}]),this.polygon(e.dark(a),f,l,c,!1,!1,[{x:t+s,y:n},{x:r+s,y:i},{x:r+s,y:i+o},{x:t+s,y:n+o}]),this},cube3D:function(t,n,r,i,s,o,u,a,f,l,c,p){t=h(l,t),n=h(l,n),a=!a||0==a?o:a,s?(i=e.vectorP2P(r,i),r=t+a*i.x,i=n-a*i.y):(r=t+a*r,i=n-a*i);for(;6>p.length;)p.push(!1);return r=h(l,r),i=h(l,i),a=[],0>i?e.isObject(p[4])&&a.push(e.applyIf({points:[{x:t,y:n-u},{x:r,y:i-u},{x:r+o,y:i-u},{x:t+o,y:n-u}]},p[4])):e.isObject(p[0])&&a.push(e.applyIf({points:[{x:t,y:n},{x:r,y:i},{x:r+o,y:i},{x:t+o,y:n}]},p[0])),e.isObject(p[1])&&a.push(e.applyIf({points:[{x:r,y:i},{x:r,y:i-u},{x:r+o,y:i-u},{x:r+o,y:i}]},p[1])),e.isObject(p[2])&&a.push(e.applyIf({points:[{x:t,y:n},{x:t,y:n-u},{x:r,y:i-u},{x:r,y:i}]},p[2])),e.isObject(p[3])&&a.push(e.applyIf({points:[{x:t+o,y:n},{x:t+o,y:n-u},{x:r+o,y:i-u},{x:r+o,y:i}]},p[3])),0>i?e.isObject(p[0])&&a.push(e.applyIf({points:[{x:t,y:n},{x:r,y:i},{x:r+o,y:i},{x:t+o,y:n}]},p[0])):e.isObject(p[4])&&a.push(e.applyIf({points:[{x:t,y:n-u},{x:r,y:i-u},{x:r+o,y:i-u},{x:t+o,y:n-u}]},p[4])),e.isObject(p[5])&&a.push(e.applyIf({points:[{x:t,y:n},{x:t,y:n-u},{x:t+o,y:n-u},{x:t+o,y:n}]},p[5])),a.each(function(e){this.polygon(e.color,f,l,c,e.shadow,e.alpha,e.points)},this),this},polygon:function(e,t,n,r,i,s,o,u,a,f){this.save().strokeStyle(t,n,r).beginPath().fillStyle(e).globalAlpha(s).shadowOn(i).moveTo(o[0].x,o[0].y);if(u){this.moveTo(h(n,f[0].x),h(n,f[0].y)).lineTo(h(n,o[0].x),h(n,o[0].y));for(r=1;r<o.length;r++)this.bezierCurveTo(p(o,o[r],r,a));this.lineTo(h(n,f[1].x),h(n,f[1].y))}else for(r=1;r<o.length;r++)this.lineTo(h(n,o[r].x),h(n,o[r].y));return this.halion().closePath().stroke(t).fill(e).restore()},lines:function(e,t,n,r){if(!t)return this;this.save().gCo(r).beginPath().strokeStyle(!0,t,n).moveTo(h(t,e[0]),h(t,e[1]));for(n=2;n<e.length-1;n+=2)this.lineTo(h(t,e[n]),h(t,e[n+1]));return this.stroke(!0).restore()},bezierCurveTo:function(e){return this.c.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]),this},label:function(e,t,n){return this.save().beginPath().strokeStyle(!0,t,n).moveTo(h(t,e[0].x),h(t,e[0].y)).bezierCurveTo([e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]).stroke(!0).restore()},lineArray:function(e,t,n,r,i){if(!t)return this;this.save().beginPath().strokeStyle(!0,t,n).moveTo(h(t,e[0].x),h(t,e[0].y));for(n=1;n<e.length;n++)r?this.bezierCurveTo(p(e,e[n],n,i||1.5)):this.lineTo(h(t,e[n].x),h(t,e[n].y));return this.stroke(!0).restore()},dotted:function(t,n,r,i,s,u,a,f,l){if(!s)return this;var t=h(s,t),n=h(s,n),r=h(s,r),i=h(s,i),c=e.distanceP2P(t,n,r,i),p;if(0>=a||c<=a||t!=r&&n!=i)return this.line(t,n,r,i,s,u,l);if(t>r||n>i)p=t,t=r,r=p,p=n,n=i,i=p;this.save().gCo(l).strokeStyle(!0,s,u).beginPath().moveTo(t,n),s=a*(f||1),u=o(c/(a+s)),c=c-u*(a+s)>a,f=n==i,u=c?u+1:u;for(l=1;l<=u;l++)this.lineTo(f?t+a*l+s*(l-1):t,f?n:n+a*l+s*(l-1)).moveTo(f?t+(a+s)*l:t,f?n:n+(a+s)*l);return c||this.lineTo(r,i),this.stroke(!0).restore()},line:function(e,t,n,r,i,s,o){return i?(this.save().gCo(o),this.beginPath().strokeStyle(!0,i,s).moveTo(h(i,e),h(i,t)).lineTo(h(i,n),h(i,r)).stroke(!0).restore()):this},round:function(e,t,n,r,i,s){return this.arc(e,t,n,0,0,u,r,!!s,i,s)},round0:function(e,t,n,r,i){return this.arc(e.x,e.y,t,0,0,u,n,!!i,r,i)},fillRect:function(e,t,n,r){return this.c.fillRect(e,t,n,r),this},translate:function(e,t){return this.c.translate(e,t),this},rotate:function(e){return this.c.rotate(e),this},clearRect:function(e,t,n,r){return n=n||this.canvas.width,r=r||this.canvas.height,this.c.clearRect(e||0,t||0,n,r),this},gCo:function(e){return e?this.gCO(e):this},gCO:function(e){return this.c.globalCompositeOperation=e?"destination-over":"source-over",this},box:function(t,r,i,a,f,l,c,p,d){f=f||{enable:0};if(f.enable){var v=f.width,m=f.color,y=f.radius,b=e.isNumber(v),v=e.parsePadding(v);v[0]==v[1]&&v[1]==v[2]&&v[2]==v[3]&&(b=!0),p=p?1:-1,i+=p*(v[1]+v[3])/2,a+=p*(v[0]+v[2])/2,t-=p*(v[3]/2),r-=p*(v[0]/2),v=b?v[0]:v,y=!b||!y||0==y||"0"==y?0:e.parsePadding(y)}
        return this.save().gCo(d).fillStyle(l).strokeStyle(b,v,m),y?this.beginPath().moveTo(h(v,t+y[0]),h(v,r)).lineTo(h(v,t+i-y[1]),h(v,r)).arc2(h(v,t+i-y[1]),h(v,r+y[1]),y[1],3*n/2,u).lineTo(h(v,t+i),h(v,r+a-y[2])).arc2(h(v,t+i-y[2]),h(v,r+a-y[2]),y[2],0,n/2).lineTo(h(v,t+y[3]),h(v,r+a)).arc2(h(v,t+y[3]),h(v,r+a-y[3]),y[3],n/2,n).lineTo(h(v,t),h(v,r+y[0])).arc2(h(v,t+y[0]),h(v,r+y[0]),y[0],n,3*n/2).closePath().shadowOn(c).stroke(v).shadowOff().fill(l):!f.enable||b?(v&&f.enable&&(this.shadowOn(c).c.strokeRect(t,r,i,a),this.shadowOff()),l&&this.fillRect(t,r,i,a)):(v&&(m=e.isArray(m)?m:[m,m,m,m],this.shadowOn(c).line(t+i,r+v[0]/2,t+i,r+a-v[0]/2,v[1],m[1],0).line(t,r+v[0]/2,t,r+a-v[0]/2,v[3],m[3],0).line(o(t-v[3]/2),r,t+i+v[1]/2,r,v[0],m[0],0).line(o(t-v[3]/2),r+a,t+i+v[1]/2,r+a,v[2],m[2],0).shadowOff()),l&&this.beginPath().moveTo(o(t+v[3]/2),o(r+v[0]/2)).lineTo(s(t+i-v[1]/2),r+v[0]/2).lineTo(s(t+i-v[1]/2),s(r+a-v[2]/2)).lineTo(o(t+v[3]/2),s(r+a-v[2]/2)).lineTo(o(t+v[3]/2),o(r+v[0]/2)).closePath().fill(l)),this.restore()},toDataURL:function(e){return this.canvas.toDataURL(e||"image/png")},addEvent:function(t,n,r){e.Event.addEvent(this.canvas,t,n,r)}},e.taylor={light:function(e,t){t.highlight=!1,e.on("mouseover",function(){t.highlight=!0,e.redraw("mouseover")}).on("mouseout",function(){t.highlight=!1,e.redraw("mouseout")}).on("beforedraw",function(){return e.push("f_color",t.highlight?e.get("light_color"):e.get("f_color_")),!0})}},e.Chart=e.extend(e.Painter,{configure:function(){e.Chart.superclass.configure.apply(this,arguments),this.type="chart",this.dataType="simple",this.set({id:"",render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},animation:!1,doAnimation:null,animation_timing_function:"easeInOut",animation_duration:1e3,z_index:999,legend:{enable:!1},tip:{enable:!1}}),this.registerEvent("beforeAnimation","afterAnimation","resize","animating"),this.T=null,this.show=this.Animationed=this.Combination=this.Rendered=!1,this.data=[],this.plugins=[],this.components=[],this.oneways=[],this.total=0,this.ICHARTJS_CHART=!0},toDataURL:function(e){return this.T.toDataURL(e)},segmentRect:function(){this.Combination||this.T.clearRect()},resetCanvas:function(){this.Combination||this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(t){t.segmentRect(),t.coo&&!t.ILLUSIVE_COO&&t.coo.draw(),t.doAnimation(t.variable.animation.time,t.duration,t),t.plugins.each(function(e){e.A_draw&&(e.variable.animation.animating=!0,e.variable.animation.time=t.variable.animation.time,e.draw(),e.variable.animation.animating=!1)}),t.Combination||(t.oneways.each(function(e){e.draw()}),t.variable.animation.time<t.duration?(t.variable.animation.time++,e.requestAnimFrame(function(){t.animation(t)})):e.requestAnimFrame(function(){t.Animationed=!0,t.plugins.each(function(e){e.Animationed=!0}),t.processAnimation=!1,t.draw(),t.plugins.each(function(e){e.processAnimation=!1}),t.fireEvent(t,"afterAnimation",[t])}))},runAnimation:function(e){e.fireEvent(e,"beforeAnimation",[e]),e.A_draw||(e.variable.animation={type:0,time:0,queue:[]}),e.processAnimation=!0,e.animation(e)},doSort:function(){var t=function(t,n){return(e.isArray(t)?t.zIndex||0:t.get("z_index"))>(e.isArray(n)?n.zIndex||0:n.get("z_index"))};this.components.sor(t),this.oneways.sor(t)},commonDraw:function(t,n){t.show=!1,t.redraw||(e.Assert.isTrue(t.Rendered,t.type+" has not rendered"),e.Assert.isTrue(t.data&&0<t.data.length,t.type+"'s data is empty"),e.Assert.isTrue(t.initialization,t.type+" Failed to initialize"),t.doSort()),t.redraw=!0,!t.Animationed&&t.get("animation")?t.runAnimation(t):(t.segmentRect(),t.components.eachAll(function(e){e.draw(n)}),t.components.eachAll(function(e){e.last&&e.last(e)}),t.oneways.each(function(e){e.draw()}),t.show=!0)},plugin:function(e){var t=this._();e.inject(t),e.ICHARTJS_CHART&&(e.Combination=!0,e.setUp()),t.get("animation")||e.push("animation",!1),e.duration=t.duration,t.register(e),t.plugins.push(e)},destroy:function(e){e.components.eachAll(function(e){e.destroy()}),e.oneways.each(function(e){e.destroy()})},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},create:function(n,r){if(n.get("fit")){var i=window.innerWidth,s=window.innerHeight,o=e.getDoc().body.style;o.padding="0px",o.margin="0px",o.overflow="hidden",n.push(n.W,i),n.push(n.H,s)}
        n.canvasid=e.uid(n.type),n.shellid="shell-"+n.canvasid,i=[],i.push("<div id='"),i.push(n.shellid),i.push("' style='padding:0px;margin:0px;overflow:hidden;position:relative;'>"),i.push("<canvas id= '"),i.push(n.canvasid),i.push("' style='-webkit-text-size-adjust: none;'>"),i.push("<p>Your browser does not support the canvas element</p></canvas>"),i.push("</div>"),r.innerHTML=i.join(""),n.shell=e(n.shellid),n.T=n.target=new t(n.canvasid),n.size(n),n.Rendered=!0},setUp:function(){var e=this._();e.redraw=!1,e.T.clearRect(),e.initialization=!1,e.initialize()},load:function(e){var t=this._();t.push("data",e||[]),t.setUp(),(t.Combination?t.root:t).draw()},resize:function(t,n){var t=e.parseFloat(t),n=e.parseFloat(n),r=this._();r.Combination||(r.width=r.push(r.W,t),r.height=r.push(r.H,n),r.size(r)),r.set(r.fireEvent(r,"resize",[t,n])),r.setUp(),r.plugins.eachAll(function(e){e.Combination&&e.resize(t,n)}),r.Combination||r.draw()},size:function(e){e.T.canvas.width=e.width=e.pushIf(e.W,400),e.T.canvas.height=e.height=e.pushIf(e.H,300),e.shell.style.width=e.width+"px",e.shell.style.height=e.height+"px"},initialize:function(){var t=this._(),n=t.get("data"),r=t.get("render");t.push(t.X,null),t.push(t.Y,null),t.options.width=t.options.width*3,t.options.height=t.options.height*3,t.options.coordinate.width=t.options.coordinate.width*3,t.options.coordinate.height=t.options.coordinate.height*3,t.options.sub_option.point_size=t.options.sub_option.point_size*3,t.Combination?(e.apply(t.options,e.clone([t.W,t.H,"padding","border","client_height","client_width","minDistance","maxDistance","centerx","centery","l_originx","r_originx","t_originy","b_originy"],t.root.options,!0)),t.width=t.get(t.W),t.height=t.get(t.H),t.shell=t.root.shell,t.Rendered=!0):t.Rendered||r&&t.create(t,e(r)),t.Rendered&&!t.initialization&&(n&&0<n.length?v.call(t,n,t):e.isString(t.get("url"))&&t.ajax.call(t,t.get("url"),function(e){t.push("data",e),t.initialize(),t.draw()})),this.options.isLayer||($("canvas[id^=area2d]").css({width:t.options.width/3,height:t.options.height/3}),$("div[id^=shell-area2d]").css({width:t.options.width/3,height:t.options.height/3}))},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(t){t.T.strokeStyle(!0,0,t.get("strokeStyle"),t.get("lineJoin")),t.processAnimation=t.get("animation"),e.isFunction(t.get("doAnimation"))&&(t.doAnimation=t.get("doAnimation")),t.animationArithmetic=e.getAA(t.get("animation_timing_function"));var n=t.variable.event,r=t.Combination,i=!t.get("turn_off_touchmove")&&!r,o=!e.touch&&t.get("default_mouseover_css")&&!r,u,a=e.touch?["touchstart","touchmove"]:["click","mousemove"];t.stopEvent=!1,t.A_draw=r&&t.processAnimation,e.register(t),r||a.each(function(n){t.T.addEvent(n,function(r){t.processAnimation||t.stopEvent||r.targetTouches&&r.targetTouches.length!=1||t.fireEvent(t,n,[t,e.Event.fix(r)])},!1)}),t.on(a[0],function(e,t){e.components.eachAll(function(e){if(e.ICHARTJS_CHART){if(e.fireEvent(e,a[0],[e,t]))return n.click=!0,!1}else{var r=e.isMouseOver(t);if(r.valid)return n.click=!0,e.fireEvent(e,"click",[e,t,r]),!t.stopPropagation}});if(n.click)return i&&t.event.preventDefault(),n.click=!1,!0}),(!e.touch||i)&&(t.on(a[1],function(e,t){u=!1,e.components.eachAll(function(e){if(!e.ICHARTJS_CHART){var n=e.variable.event,r=e.isMouseOver(t);if(r.valid){u=u||e.atomic,n.mouseover||(n.mouseover=!0,e.fireEvent(e,"mouseover",[e,t,r])),e.fireEvent(e,"mousemove",[e,t,r]);if(r.stop)return!1}else n.mouseover&&(n.mouseover=!1,e.fireEvent(e,"mouseout",[e,t,r]));return!t.stopPropagation}
        if(e.fireEvent(e,a[1],[e,t]))return u=!0,!1});if(n.mouseover)return t.event.preventDefault(),u||(n.mouseover=!1,e.fireEvent(e,"mouseout",[e,t])),n.mouseover;u&&(n.mouseover=u,e.fireEvent(e,"mouseover",[e,t]))}),o)&&t.on("mouseover",function(){t.T.css("cursor","pointer")}).on("mouseout",function(){t.T.css("cursor","default")}),e.applyIf(t.get("sub_option"),e.clone(["shadow","tip"],t.options,!0)),t.Combination||(t.bg=new e.Custom({z_index:-1,drawFn:function(){t.T.box(0,0,t.width,t.height,t.get("border"),t.get("f_color"),0,0,!0)}}),t.duration=s(t.get("animation_duration")*e.FRAME/1e3)),t.oneWay=e.emptyFn},originXY:function(e,t,n){var r=e.get("align");return r==e.L?e.pushIf(e.X,t[0]):r==e.R?e.pushIf(e.X,t[1]):e.pushIf(e.X,t[2]),e.x=e.push(e.X,e.get(e.X)+e.get("offsetx")),e.y=e.push(e.Y,n[0]+e.get("offsety")),{x:e.x,y:e.y}},getPercent:function(e,t){return this.get("showpercent")?(100*(e/(t||this.total||1))).toFixed(this.get("decimalsnum"))+"%":e},doActing:function(t,n,r,i,s){var o=!!t.get("communal_acting"),u=t.getPercent(n.value,n.total);t.push(o?"sub_option":"communal_acting",e.clone(t.get(o?"communal_acting":"sub_option"),!0)),e.merge(t.get("sub_option"),n),e.merge(t.get("sub_option"),r),t.push("sub_option.value",u),t.push("sub_option.value_",n.value),t.get("sub_option.tip.enable")&&(t.push("sub_option.tip.text",s||n.name+" "+u),t.push("sub_option.tip.name",n.name),t.push("sub_option.tip.index",i),t.push("sub_option.tip.value",n.value),t.push("sub_option.tip.total",n.total||t.total))},register:function(t){return t.id=e.uid(t.type),this.components.push(t),t},remove:function(e,t){t&&e.components.each(function(n,r){if(t.id==n.id)return e.components.splice(r,1),!1})},doConfig:function(){e.Chart.superclass.doConfig.call(this);var t=this._();t.destroy(t),t.oneways.length=0,t.oneWay(t),t.push("communal_acting",0);if(!t.Combination){t.oneways.push(t.bg),t.push("r_originx",t.width-t.get("padding_right")),t.push("b_originy",t.height-t.get("padding_bottom")),t.applyGradient(),e.isString(t.get("title"))&&t.push("title",e.applyIf({text:t.get("title")},t.default_.title)),e.isString(t.get("subtitle"))&&t.push("subtitle",e.applyIf({text:t.get("subtitle")},t.default_.subtitle)),e.isString(t.get("footnote"))&&t.push("footnote",e.applyIf({text:t.get("footnote")},t.default_.footnote));var n=0,r=t.push("l_originx",t.get("padding_left")),i=t.push("t_originy",t.get("padding_top")),s=t.push("client_width",t.width-t.get("hpadding"));if(""!=t.get("title.text")){var o=""!=t.get("subtitle.text"),n=o?t.get("title.height")+t.get("subtitle.height"):t.get("title.height"),i=t.push("t_originy",i+n);t.push("title.originx",r),t.push("title.originy",t.get("padding_top")),t.push("title.maxwidth",s),t.pushIf("title.width",s),t.title=new e.Text(t.get("title"),t),t.oneways.push(t.title),o&&(t.push("subtitle.originx",r),t.push("subtitle.originy",t.get("padding_top")+t.get("title.height")),t.pushIf("subtitle.width",s),t.push("subtitle.maxwidth",s),t.subtitle=new e.Text(t.get("subtitle"),t),t.oneways.push(t.subtitle))}""!=t.get("footnote.text")&&(o=t.get("footnote.height"),n+=o,t.push("b_originy",t.get("b_originy")-o),t.push("footnote.originx",r),t.push("footnote.originy",t.get("b_originy")),t.push("footnote.maxwidth",s),t.pushIf("footnote.width",s),t.footnote=new e.Text(t.get("footnote"),t),t.oneways.push(t.footnote)),n=t.push("client_height",t.get(t.H)-t.get("vpadding")-t.pushIf("other_height",n)),t.push("minDistance",f(s,n)),t.push("maxDistance",a(s,n)),t.push("centerx",r+s/2),t.push("centery",i+n/2)}
        t.get("legend.enable")&&(t.legend=new e.Legend(e.apply({maxwidth:t.get("client_width"),data:t.data},t.get("legend")),t),t.oneways.push(t.legend)),t.push("sub_option.tip.wrap",t.push("tip.wrap",t.shell))}})}(e),e.Custom=e.extend(e.Component,{configure:function(){e.Custom.superclass.configure.apply(this,arguments),this.type="custom",this.set({drawFn:e.emptyFn,configFn:e.emptyFn,eventValid:void 0,animating_draw:!0})},doDraw:function(e){e.get("drawFn").call(e,e)},isEventValid:function(t,n){return e.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,t,n):{valid:!1}},doConfig:function(){e.Custom.superclass.doConfig.call(this);var t=this._();t.A_draw=t.get("animating_draw"),t.variable.animation={animating:!1,time:0},t.duration=0,t.get("configFn").call(t,t)}}),e.Scale=e.extend(e.Component,{configure:function(){e.Scale.superclass.configure.apply(this,arguments),this.type="scale",this.set({position:"left",which:"h",basic_value:0,scale2grid:!0,distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2}),this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},getScale:function(t){return t=[t.get("basic_value"),t.get("start_scale"),t.get("end_scale"),t.get("end_scale")-t.get("start_scale"),0],t[4]=e.inRange(t[1],t[2]+1,t[0])||e.inRange(t[2]-1,t[1],t[0]),{range:t[4],basic:t[4]?(t[0]-t[1])/t[3]:0,start:t[4]?t[0]:t[1],end:t[2],distance:t[3]}},doDraw:function(e){e.get("scale_enable")&&e.items.each(function(t){e.T.line(t.x0,t.y0,t.x1,t.y1,e.get("scale_size"),e.get("scale_color"),!1)}),e.labels.each(function(e){e.draw()})},doLayout:function(e,t,n){n.get("scale_enable")&&n.items.each(function(n){n.x0+=e,n.y0+=t,n.x1+=e,n.y1+=t}),n.labels.each(function(n){n.doLayout(e,t,0,n)})},doConfig:function(){e.Scale.superclass.doConfig.call(this);var t=this._(),n=Math.abs,r=t.get("labels").length,i=t.get("min_scale"),s=t.get("max_scale"),o=t.get("scale_space"),u=t.get("end_scale"),a=t.get("start_scale");t.items=[],t.labels=[],t.number=0;if(0<r)t.number=r-1;else{a>i&&(a=t.push("start_scale",e.floor(i)));if(!e.isNumber(u)||u<s)u=e.ceil(s),u=t.push("end_scale",!u&&!a?1:u);o&&n(o)<n(u-a)&&t.push("scale_share",(u-a)/o),t.number=t.push("scale_share",n(t.get("scale_share")));if(!o||o>u-a){o=(u-a+"").indexOf(".")+1;for(n=1;0<o;)o--,n*=10;o=t.push("scale",(u-a)*n/t.get("scale_share")/n)}
    parseInt(o)!=o&&0==t.get("decimalsnum")&&t.push("decimalsnum",(o+"").substring((o+"").indexOf(".")+1).length)}
    t.push("distanceOne",t.get("valid_distance")/t.number);var f,l,h,p=s=i=n=u=0,d=0;f=t.get("scale_width"),l=f/2,h=t.get("scaleAlign");var v=t.get("position"),m=t.get("text_space"),g="",y=t.get("coo").get("axis.width");t.push("which",t.get("which").toLowerCase()),t.isH="h"==t.get("which"),t.isH?(h==t.O?s=-f:h==t.C?(s=-l,n=l):n=f,v==t.O?(d=-m-y[0],g=t.B):(d=m+y[2],g=t.O),v=t.C):(h==t.L?i=-f:h==t.C?(i=-l,u=l):u=f,g="middle",v==t.R)?(v=t.L,p=m+y[1]):(v=t.R,p=-m-y[3]);for(m=0;m<=t.number;m++)f=r?t.get("labels")[m]:(o*m+a).toFixed(t.get("decimalsnum")),l=t.isH?t.get("valid_x")+m*t.get("distanceOne"):t.x,h=t.isH?t.y:t.get("valid_y")+t.get("valid_distance")-m*t.get("distanceOne"),t.items.push({x:l,y:h,x0:l+i,y0:h+s,x1:l+u,y1:h+n}),t.get("label")&&t.labels.push(new e.Text(e.applyIf(e.apply(t.get("label"),e.merge({text:f,x:l,y:h,originx:l+p,originy:h+d},t.fireEvent(t,"parseText",[f,l+p,h+d,m,t.number==m]))),{textAlign:v,textBaseline:g}),t))}}),e.Coordinate={coordinate_:function(t){var n=this._(),r=n.get("coordinate");if(r.ICHARTJS_OBJECT)return n.x=n.push(n.X,r.x),n.y=n.push(n.Y,r.y),n.ILLUSIVE_COO=!0,r;var r=e.parsePercent,i=n.get("coordinate.scale"),s=n.get("scaleAlign"),o=n.push("coordinate._width",r(n.get("coordinate.width")||"85%",Math.floor(n.get("client_width"))));h=n.push("coordinate._height",r(n.get("coordinate.height")||"85%",Math.floor(n.get("client_height")))-(n.is3D()?(n.get("coordinate.pedestal_height")||22)+(n.get("coordinate.board_deep")||20):0)),n.push("coordinate.valid_height_value",r(n.get("coordinate.valid_height"),h)),n.push("coordinate.valid_width_value",r(n.get("coordinate.valid_width"),o)),n.originXY(n,[n.get("l_originx"),n.get("r_originx")-o,n.get("centerx")-o/2],[n.get("centery")-h/2]),n.push("coordinate.originx",n.x),n.push("coordinate.originy",n.y),t&&t(),e.isObject(i)&&(i=[i]);if(e.isArray(i)){var u="stacked"!=n.dataType;i.each(function(t){n.get("percent")&&t.position==s&&(t=e.apply(t,{start_scale:0,end_scale:100,scale_space:10,listeners:{parseText:function(e){return{text:e+"%"}}}}));if(!t.start_scale||u&&t.start_scale>n.get("minValue"))t.min_scale=n.get("minValue");if(!t.end_scale||u&&t.end_scale<n.get("maxValue"))t.max_scale=n.get("maxValue")})}else n.push("coordinate.scale",{position:s,scaleAlign:s,max_scale:n.get("maxValue"),min_scale:n.get("minValue")});return n.is3D()&&(n.push("coordinate.xAngle_",n.get("xAngle_")),n.push("coordinate.yAngle_",n.get("yAngle_")),n.push("coordinate.zHeight",n.get("zHeight")*n.get("bottom_scale"))),n.remove(n,n.coo),n.register(new(e[n.is3D()?"Coordinate3D":"Coordinate2D"])(n.get("coordinate"),n))}},e.Coordinate2D=e.extend(e.Component,{configure:function(){e.Coordinate2D.superclass.configure.apply(this,arguments),this.type="coordinate2d",this.set({sign_size:12,sign_space:5,scale:[],width:"85%",height:"85%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:.01,crosshair:{enable:!1},z_index:-1,axis:{enable:!0,color:"#666666",width:1}}),this.scale=[],this.gridlines=[]},getScale:function(e,t){for(var n=this._(),r=0;r<n.scale.length;r++)if(n.scale[r].get("position")==e)return n.scale[r].getScale(n.scale[r]);if(!t)return e=e==n.L?n.R:e==n.R?n.L:e==n.O?n.B:n.O,n.getScale(e,!0);throw Error("there no valid scale")},isEventValid:function(e,t){return{valid:e.x>t.x&&e.x<t.x+t.width&&e.y<t.y+t.height&&e.y>t.y}},doDraw:function(t){t.T.box(t.x,t.y,t.width,t.height,0,t.get("f_color"));if(t.get("striped")){var n,r,i=!1;t.get("axis.width");var s=e.dark(t.get("background_color"),t.get("striped_factor"),0)}
    var o="v"==t.get("striped_direction");t.gridlines.each(function(e){t.get("striped")&&(i&&(o?t.T.box(e.x1,e.y1+e.width,e.x2-e.x1,r-e.y1-e.width,0,s):t.T.box(n+e.width,e.y2,e.x1-n,e.y1-e.y2,0,s)),n=e.x1,r=e.y1,i=!i)}).each(function(e){e.overlap||(e.solid?t.T.line(e.x1,e.y1,e.x2,e.y2,e.width,e.color):t.T.dotted(e.x1,e.y1,e.x2,e.y2,e.width,e.color,e.size,e.fator))}),t.T.box(t.x,t.y,t.width,t.height,t.get("axis"),!1,t.get("shadow"),!0),t.scale.each(function(e){e.draw()})},destroy:function(){this.crosshair&&this.crosshair.destroy()},doCrosshair:function(t){t.get("crosshair.enable")&&!t.crosshair&&(t.push("crosshair.wrap",t.root.shell),t.push("crosshair.height",t.height),t.push("crosshair.width",t.width),t.push("crosshair.top",t.y),t.push("crosshair.left",t.x),t.crosshair=new e.CrossHair(t.get("crosshair"),t))},doConfig:function(){e.Coordinate2D.superclass.doConfig.call(this);var t=this._();t.atomic=!1,t.width=t.get("_width"),t.height=t.get("_height"),t.valid_width=t.get("valid_width_value"),t.valid_height=t.get("valid_height_value"),t.get("gradient")&&e.isString(t.get("f_color"))&&t.push("f_color",t.T.avgLinearGradient(t.x,t.y,t.x,t.y+t.height,[t.get("dark_color"),t.get("light_color")]));if(t.get("axis.enable")){var n=t.get("axis.width");e.isArray(n)||t.push("axis.width",[n,n,n,n])}else t.push("axis.width",[0,0,0,0]);t.doCrosshair(t);var r,i=(n=!!t.get("gridlinesVisible")&&!!t.get("grids"))&&!!t.get("grids.horizontal"),s=n&&!!t.get("grids.vertical"),o=t.height,u=t.width,a=t.valid_width,f=t.valid_height,n=t.get("gridlinesVisible")&&t.get("scale2grid")&&(!i||!s),l=t.push("x_start",t.x+(u-a)/2),h=t.push("y_start",t.y+(o-f)/2),p=t.get("axis.width");t.push("x_end",t.x+(u+a)/2),t.push("y_end",t.y+(o+f)/2),e.isArray(t.get("scale"))||(e.isObject(t.get("scale"))?t.push("scale",[t.get("scale")]):t.push("scale",[])),t.get("scale").each(function(n){r=(r=n.position)||t.L,r=r.toLowerCase(),n[t.X]=t.x,n.coo=t,n[t.Y]=t.y,n.valid_x=l,n.valid_y=h,n.position=r,r==t.O?(n.which="h",n.distance=u,n.valid_distance=a):r==t.R?(n.which="v",n.distance=o,n.valid_distance=f,n[t.X]+=u,n.valid_x+=a):r==t.B?(n.which="h",n.distance=u,n.valid_distance=a,n[t.Y]+=o,n.valid_y+=f):(n.which="v",n.distance=o,n.valid_distance=f),t.scale.push(new e.Scale(n,t.root))},t);var d=t.push("ignoreOverlap",t.get("ignoreOverlap")&&t.get("axis.enable")||t.get("ignoreEdge"));if(d)var v=t.get("ignoreEdge")?function(e,n,r){return"v"==e?r==t.y||r==t.y+o:n==t.x||n==t.x+e}:function(e,n,r){return"v"==e?r==t.y&&0<p[0]||r==t.y+o&&0<p[2]:n==t.x&&0<p[3]||n==t.x+u&&0<p[1]};var m={solid:!0,size:10,fator:1,width:t.get("grid_line_width"),color:t.get("grid_color")},g=e.applyIf(t.get("gridHStyle"),m),y=e.applyIf(t.get("gridVStyle"),m);if(n){var b,w,E;t.scale.each(function(n){E=n.get("position"),!e.isFalse(n.get("scale2grid"))&&!(i&&"v"==n.get("which")||s&&"h"==n.get("which"))&&(b=w=0,E==t.O?w=o:E==t.R?b=-u:E==t.B?w=-o:b=u,n.items.each(function(r){d&&t.gridlines.push(e.applyIf({overlap:v.call(t,n.get("which"),r.x,r.y),x1:r.x,y1:r.y,x2:r.x+b,y2:r.y+w},n.isH?y:g))}))})}
    if(s){var S=t.get("grids.vertical");e.Assert.isTrue(0<S.value,"vertical value"),n=u/S.value,m=S.value,"given_value"==S.way&&(m=n,n=S.value,n=n>u?u:n);for(S=0;S<=m;S++)d&&t.gridlines.push(e.applyIf({overlap:v.call(t,"h",t.x+S*n,t.y),x1:t.x+S*n,y1:t.y,x2:t.x+S*n,y2:t.y+o,H:!1,width:y.width,color:y.color},y))}
    if(i){S=t.get("grids.horizontal"),e.Assert.isTrue(0<S.value,"horizontal value"),n=o/S.value,m=S.value,"given_value"==S.way&&(m=n,n=S.value,n=n>o?o:n);for(S=0;S<=m;S++)d&&t.gridlines.push(e.applyIf({overlap:v.call(t,"v",t.x,t.y+S*n),x1:t.x,y1:t.y+S*n,x2:t.x+u,y2:t.y+S*n,H:!0,width:g.width,color:g.color},g))}}}),e.Coordinate3D=e.extend(e.Coordinate2D,{configure:function(){e.Coordinate3D.superclass.configure.apply(this,arguments),this.type="coordinate3d",this.dimension=e._3D,this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(e){var t=e.width,n=e.height,r=e.get("xAngle_"),i=e.get("yAngle_"),s=e.get("zHeight"),o=e.get("z_offx"),u=e.get("z_offy");e.get("pedestal_height")&&e.T.cube3D(e.x,e.y+n+e.get("pedestal_height"),r,i,!1,t,e.get("pedestal_height"),3*s/2,e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("bottom_style")),e.get("board_deep")&&e.T.cube3D(e.x+o,e.y+n-u,r,i,!1,t,n,e.get("board_deep"),e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("board_style")),e.T.cube3D(e.x,e.y+n,r,i,!1,t,n,s,e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("wall_style")),e.gridlines.each(function(t){t.solid?(e.get("left_board")&&e.T.line(t.x1,t.y1,t.x1+o,t.y1-u,t.width,t.color),e.T.line(t.x1+o,t.y1-u,t.x2+o,t.y2-u,t.width,t.color)):(e.get("left_board")&&e.T.dotted(t.x1,t.y1,t.x1+o,t.y1-u,t.width,t.color,t.size,t.fator),e.T.dotted(t.x1+o,t.y1-u,t.x2+o,t.y2-u,t.width,t.color,t.size,t.fator))}),e.scale.each(function(e){e.draw()})},doConfig:function(){e.Coordinate3D.superclass.doConfig.call(this);for(var t=this._(),n=t.get("wall_style"),r=t.get("background_color")||"#d6dbd2",i=t.height,s=t.width,o=t.get("color_factor"),u=t.push("z_offx",t.get("xAngle_")*t.get("zHeight")),a=t.push("z_offy",t.get("yAngle_")*t.get("zHeight"));6>n.length;)n.push({color:r});t.get("left_board")||(n[2]=!1,t.scale.each(function(e){e.doLayout(u,-a,e)})),t.push("bottom_style",[{color:t.get("shadow_color"),shadow:t.get("shadow")},!1,!1,{color:n[3].color},!1,{color:n[3].color}]),t.push("board_style",[!1,!1,!1,{color:n[4].color},{color:n[5].color},!1]),t.get("gradient")&&(e.isString(n[0].color)&&(n[0].color=t.T.avgLinearGradient(t.x,t.y+i,t.x+s,t.y+i,[e.dark(n[0].color,o/2+.06),e.dark(n[0].color,o/2+.06)])),e.isString(n[1].color)&&(n[1].color=t.T.avgLinearGradient(t.x+u,t.y-a,t.x+u,t.y+i-a,[e.dark(n[1].color,o),e.light(n[1].color,o)])),e.isString(n[2].color)&&(n[2].color=t.T.avgLinearGradient(t.x,t.y,t.x,t.y+i,[e.light(n[2].color,o/3),e.dark(n[2].color,o)])),t.get("bottom_style")[5].color=t.T.avgLinearGradient(t.x,t.y+i,t.x,t.y+i+t.get("pedestal_height"),[e.light(n[3].color,o/2+.06),e.dark(n[3].color,o/2,0)])),t.push("wall_style",[n[0],n[1],n[2]])}}),e.Rectangle=e.extend(e.Component,{configure:function(){e.Rectangle.superclass.configure.apply(this,arguments),this.type="rectangle",this.set({width:0,height:0,value_space:4,value:"",label:{},name:"",tipAlign:"top",valueAlign:"top",shadow_blur:3,shadow_offsety:-1}),this.atomic=!0,this.registerEvent("parseText"),this.label=null},last:function(e){e.label&&e.label.draw()},doDraw:function(e){e.drawRectangle()},doConfig:function(){e.Rectangle.superclass.doConfig.call(this);var t=this._(),n=t.variable.event,r=t.get("valueAlign");e.taylor.light(t,n),t.width=t.get(t.W),t.height=t.get(t.H);var n=t.push("centerx",t.x+t.width/2),i=t.push("centery",t.y+t.height/2),s=t.C,o="middle",u=t.get("value_space");r==t.L?(s=t.R,n=t.x-u):r==t.R?(s=t.L,n=t.x+t.width+u):r==t.B?(i=t.y+t.height+u,o=t.O):r==t.O&&(i=t.y-u,o=t.B),t.get("label")&&(t.push("label.originx",n),t.push("label.originy",i),t.push("label.text",t.push("value",t.fireString(t,"parseText",[t,t.get("value")],t.get("value")))),e.applyIf(t.get("label"),{textAlign:s,textBaseline:o,color:t.get("color")}),t.label=new e.Text(t.get("label"),t)),t.get("tip.enable")&&("follow"!=t.get("tip.showType")&&t.push("tip.invokeOffsetDynamic",!1),t.tip=new e.Tip(t.get("tip"),t))}}),e.Rectangle2D=e.extend(e.Rectangle,{configure:function(){e.Rectangle2D.superclass.configure.apply(this,arguments),this.type="rectangle2d",this.set({shadow_offsety:-2})},drawRectangle:function(){var e=this._();e.T.box(e.get(e.X),e.get(e.Y),e.get(e.W),e.get(e.H),e.get("border"),e.get("f_color"),e.get("shadow"))},isEventValid:function(e,t){return{valid:e.x>t.x&&e.x<t.x+t.width&&e.y<t.y+t.height&&e.y>t.y}},tipInvoke:function(){var e=this._();return function(t,n){return{left:e.tipX(t,n),top:e.tipY(t,n)}}},doConfig:function(){e.Rectangle2D.superclass.doConfig.call(this);var t=this._(),n=t.get("tipAlign");n==t.L||n==t.R?t.tipY=function(e,n){return t.get("centery")-n/2}:t.tipX=function(e){return t.get("centerx")-e/2},n==t.L?t.tipX=function(e){return t.x-t.get("value_space")-e}:n==t.R?t.tipX=function(){return t.x+t.width+t.get("value_space")}:t.tipY=n==t.B?function(){return t.y+t.height+3}:function(e,n){return t.y-n-3},t.applyGradient()}}),e.Rectangle3D=e.extend(e.Rectangle,{configure:function(){e.Rectangle3D.superclass.configure.apply(this,arguments),this.type="rectangle3d",this.dimension=e._3D,this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawRectangle:function(){var e=this._();e.T.cube(e.get(e.X),e.get(e.Y),e.get("xAngle_"),e.get("yAngle_"),e.get(e.W),e.get(e.H),e.get("zHeight"),e.get("f_color"),e.get("border.enable"),e.get("border.width"),e.get("light_color"),e.get("shadow"))},isEventValid:function(e,t){return{valid:e.x>t.x&&e.x<t.x+t.get(t.W)&&e.y<t.y+t.get(t.H)&&e.y>t.y}},tipInvoke:function(){var e=this._();return function(t,n){return{left:e.topCenterX-t/2,top:e.topCenterY-n}}},doConfig:function(){e.Rectangle3D.superclass.doConfig.call(this);var t=this._();t.pushIf("zHeight",t.get(t.W)),t.topCenterX=t.x+(t.get(t.W)+t.get(t.W)*t.get("xAngle_"))/2,t.topCenterY=t.y-t.get(t.W)*t.get("yAngle_")/2-t.get("value_space"),t.get("valueAlign")==t.O&&t.label&&(t.label.push("textx",t.topCenterX),t.label.push("texty",t.topCenterY))}}),e.Sector=e.extend(e.Component,{configure:function(){e.Sector.superclass.configure.apply(this,arguments),this.type="sector",this.set({value:"",name:"",ignored:!1,counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,label_length:void 0,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:!1,label:{},rounded:!1}),this.atomic=!0,this.registerEvent("changed","parseText"),this.tip=this.label=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){var e=this._();return{x:e.x,x:e.y,startAngle:e.get("startAngle"),middleAngle:e.get("middleAngle"),endAngle:e.get("endAngle")}},doDraw:function(e){e.get("ignored")||(e.label&&!e.get("mini_label")&&e.label.draw(),e.drawSector(),e.label&&e.get("mini_label")&&e.label.draw())},doText:function(t,n,r){t.push("label.originx",n),t.push("label.originy",r),t.push("label.textBaseline","middle"),t.label=new e.Text(t.get("label"),t)},doLabel:function(t,n,r,i,s,o,u,a){t.push("label.originx",n),t.push("label.originy",r),t.push("label.quadrantd",i),t.push("label.line_points",s),t.push("label.labelx",o),t.push("label.labely",u),t.push("label.smooth",a),t.push("label.angle",t.get("middleAngle")%(2*Math.PI)),t.label=new e.Label(t.get("label"),t)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){e.Sector.superclass.doConfig.call(this);var t=this._(),n=t.variable.event,r=t.get("label"),i=t.get("bound_event"),s;t.get("rounded")?(t.push("startAngle",0),t.push("endAngle",2*Math.PI)):(e.taylor.light(t,n),t.push("totalAngle",t.get("endAngle")-t.get("startAngle")),r&&(t.get("mini_label")&&(t.get("mini_label_threshold_angle")*Math.PI/180>t.get("totalAngle")?t.push("mini_label",!1):e.apply(t.get("label"),t.get("mini_label"))),t.push("label.text",t.fireString(t,"parseText",[t,t.get("label.text")],t.get("label.text"))),t.pushIf("label.border.color",t.get("border.color")),t.push("label.scolor",t.get("background_color"))),t.variable.event.status=t.expanded=t.get("expand"),t.get("tip.enable")&&("follow"!=t.get("tip.showType")&&t.push("tip.invokeOffsetDynamic",!1),t.tip=new e.Tip(t.get("tip"),t)),n.poped=!1,t.on(i,function(){n.poped=!0,t.expanded=!t.expanded,t.redraw(i),n.poped=!1}),t.on("beforedraw",function(e,o){return o==i&&(s=!1,t.x=t.get(t.X),t.y=t.get(t.Y),t.expanded&&(t.get("mutex")&&!n.poped?(t.expanded=!1,s=!0):(t.x=t.x+t.get("inc_x"),t.y=t.y-t.get("inc_y"))),n.status!=t.expanded&&(t.fireEvent(t,"changed",[t,t.expanded]),s=!0,n.status=t.expanded),r&&s&&t.label.doLayout(t.get("inc_x")*(t.expanded?1:-1),-t.get("inc_y")*(t.expanded?1:-1),2,t.label)),!0}))}}),e.Sector2D=e.extend(e.Sector,{configure:function(){e.Sector2D.superclass.configure.apply(this,arguments),this.type="sector2d",this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(t,n){if(!n.get("ignored")){if(n.isLabel()&&n.label.isEventValid(t,n.label).valid)return{valid:!0};var r=e.distanceP2P(n.x,n.y,t.x,t.y),i=n.get("donutwidth");if(n.r<r||i&&n.r-i>r)return{valid:!1};if(e.angleInRange(n.get("startAngle"),n.get("endAngle"),e.atan2Radian(n.x,n.y,t.x,t.y)))return{valid:!0}}
    return{valid:!1}},tipInvoke:function(){var t=this,n=t.get("middleAngle"),r=e.quadrantd(n);return function(i,s){var o=e.p2Point(t.x,t.y,n,.8*t.r);return{left:1<=r&&2>=r?o.x-i:o.x,top:2<=r?o.y-s:o.y}}},doConfig:function(){e.Sector2D.superclass.doConfig.call(this);var t=this._();t.r=t.get("radius"),t.get("donutwidth")>t.r&&t.push("donutwidth",0),t.applyGradient(t.x-t.r,t.y-t.r,1.8*t.r,1.8*t.r);var n=t.get("middleAngle"),r=t.pushIf("increment",e.lowTo(5,t.r/10));t.push("inc_x",r*Math.cos(2*Math.PI-n)),t.push("inc_y",r*Math.sin(2*Math.PI-n)),r*=2;if(t.get("label"))if(t.get("mini_label"))P2=e.p2Point(t.x,t.y,n,t.get("donutwidth")?t.r-t.get("donutwidth")/2:5*t.r/8),t.doText(t,P2.x,P2.y);else{var i=e.quadrantd(n),s=e.p2Point(t.x,t.y,n,t.r+r),o=e.p2Point(t.x,t.y,n,t.r+.6*r);P2=e.p2Point(t.x,t.y,n,t.r),t.doLabel(t,P2.x,P2.y,i,[{x:P2.x,y:P2.y},{x:o.x,y:o.y},{x:s.x,y:s.y}],s.x,s.y,.4*r)}}}),e.Sector3D=e.extend(e.Sector,{configure:function(){e.Sector3D.superclass.configure.apply(this,arguments),this.type="sector3d",this.dimension=e._3D,this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0}),this.proxy=!0},isEventValid:function(t,n){if(!n.get("ignored")){if(n.isLabel()&&n.label.isEventValid(t,n.label).valid)return{valid:!0};if(!e.inEllipse(t.x-n.x,t.y-n.y,n.a,n.b))return{valid:!1};if(e.angleZInRange(n.sA,n.eA,e.atan2Radian(n.x,n.y,t.x,t.y)))return{valid:!0}}
    return{valid:!1}},p2p:function(e,t,n,r){return{x:e+this.a*Math.cos(n)*r,y:t+this.b*Math.sin(n)*r}},tipInvoke:function(){var t=this,n=t.get("middleAngle"),r=e.quadrantd(n);return function(e,i){var s=t.p2p(t.x,t.y,n,.6);return{left:2<=r&&3>=r?s.x-e:s.x,top:3<=r?s.y-i:s.y}}},doConfig:function(){e.Sector3D.superclass.doConfig.call(this);var t=this._(),n=t.get("counterclockwise"),r=t.get("middleAngle");t.a=t.get("semi_major_axis"),t.b=t.get("semi_minor_axis"),t.h=t.get("cylinder_height"),e.Assert.isTrue(0<=t.a*t.b,"major&minor");var i=2*Math.PI,s=function(r){for(;0>r;)r+=i;return Math.abs(e.atan2Radian(0,0,t.a*Math.cos(r),n?-t.b*Math.sin(r):t.b*Math.sin(r)))},o=t.pushIf("increment",e.lowTo(5,t.a/10));t.sA=s.call(t,t.get("startAngle")),t.eA=s.call(t,t.get("endAngle")),t.mA=s.call(t,r),t.push("inc_x",o*Math.cos(i-t.mA)),t.push("inc_y",o*Math.sin(i-t.mA)),o*=2;if(t.get("label"))if(t.get("mini_label"))o=t.p2p(t.x,t.y,r,.5),t.doText(t,o.x,o.y);else{var s=e.quadrantd(r),u=t.p2p(t.x,t.y,r,o/t.a+1),a=t.p2p(t.x,t.y,r,.6*o/t.a+1),r=t.p2p(t.x,t.y,r,1);t.doLabel(t,r.x,r.y,s,[{x:r.x,y:r.y},{x:a.x,y:a.y},{x:u.x,y:u.y}],u.x,u.y,.4*o)}}}),e.Pie=e.extend(e.Chart,{configure:function(){e.Pie.superclass.configure.call(this),this.type="pie",this.set({radius:"100%",offset_angle:0,separate_angle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,layout_distance:4,pop_animate:!1,mutex:!1,increment:void 0,sub_option:{label:{}}}),this.registerEvent("bound","rebound"),this.sectors=[],this.components.push(this.sectors),this.ILLUSIVE_COO=!0},toggle:function(e){this.sectors[e||0].toggle()},bound:function(e){this.sectors[e||0].bound()},rebound:function(e){this.sectors[e||0].rebound()},getSectors:function(){return this.sectors},doAnimation:function(e,t,n){var r=0,i=n.oA;n.sectors.each(function(s){r=n.animationArithmetic(e,0,s.get("totalAngle"),t),s.push("startAngle",i),s.push("endAngle",i+=r),n.is3D()||s.drawSector()}),n.is3D()&&n.proxy.drawSector()},parse:function(e){e.data.each(function(t,n){e.doParse(e,t,n)},e),e.localizer(e)},doParse:function(e,t,n){var r=t.name+" "+e.getPercent(t.value);e.doActing(e,t,null,n,r),e.push("sub_option.id",n),e.get("sub_option.label")&&e.push("sub_option.label.text",r),e.push("sub_option.listeners.changed",function(t,n){e.fireEvent(e,n?"bound":"rebound",[e,t.get("name")])}),e.sectors.push(e.doSector(e,t))},doSector:function(t){return new e[t.sub](t.get("sub_option"),t)},dolayout:function(t,n,r,i,s,o){if(t.is3D()?e.inEllipse(t.get(t.X)-n,t.topY-r,t.a,t.b):e.distanceP2P(t.get(t.X),t.topY,n,r)<t.r)r=t.topY-r,i.push("labelx",t.get(t.X)+(2*Math.sqrt(t.r*t.r-r*r)+s)*(0==o||3==o?1:-1)),i.localizer(i)},localizer:function(e){if(e.get("intellectLayout")){var t=[],n=[],r=e.get("layout_distance"),i,s,o;e.sectors.each(function(e){e.isLabel()&&t.push(e.label)}),t.sor(function(e,t){return 0<Math.abs(Math.sin(e.get("angle")))-Math.abs(Math.sin(t.get("angle")))}),t.each(function(t){n.each(function(n){s=n.labelx,o=n.labely;if(t.labely<=o&&o-t.labely-1<t.get(e.H)||t.labely>o&&t.labely-o-1<n.get(e.H))if(t.labelx<=s&&s-t.labelx<t.get(e.W)||t.labelx>s&&t.labelx-s<n.get(e.W))i=t.get("quadrantd"),t.push("labely",t.get("labely")+o-t.labely+(t.get(e.H)+r)*(1<i?-1:1)),t.localizer(t),e.dolayout(e,t.get("labelx"),t.get("labely")+t.get(e.H)/2*(2>i?-1:1),t,r,i)},e),n.push(t)})}},doConfig:function(){e.Pie.superclass.doConfig.call(this);var t=this._(),n,r=t.get("radius"),i=t.get("sub_option.label")?.35:.44,s=2*Math.PI;t.sub=t.is3D()?"Sector3D":"Sector2D",t.sectors.zIndex=t.get("z_index"),t.sectors.length=0,t.oA=e.angle2Radian(t.get("offset_angle"))%s,t.is3D()&&(i+=.06);var o=t.data.length,u=e.angle2Radian(e.between(0,90,t.get("separate_angle"))),a=s-u,u=u/o,f=t.oA+u,l=f;0==t.total&&(n=1/o),t.data.each(function(e,r){f+=(n||e.value/t.total)*a,r==o-1&&(f=s+t.oA),e.startAngle=l,e.endAngle=f,e.totalAngle=f-l,e.middleAngle=(l+f)/2,l=f+u},t),t.r=r=e.parsePercent(r,Math.floor(t.get("minDistance")*i)),t.topY=t.originXY(t,[r+t.get("l_originx"),t.get("r_originx")-r,t.get("centerx")],[t.get("centery")]).y,e.apply(t.get("sub_option"),e.clone([t.X,t.Y,"bound_event","mutex","increment"],t.options))}}),e.Pie2D=e.extend(e.Pie,{configure:function(){e.Pie2D.superclass.configure.call(this),this.type="pie2d"},doConfig:function(){e.Pie2D.superclass.doConfig.call(this);var t=this._();t.push("sub_option.radius",t.r),t.parse(t)}}),e.register("Pie2D"),e.Pie3D=e.extend(e.Pie,{configure:function(){e.Pie3D.superclass.configure.apply(this,arguments),this.type="pie3d",this.dimension=e._3D,this.set({zRotate:45,yHeight:30}),this.positive=!0},doSector:function(t,n){return t.push("sub_option.cylinder_height",n.cylinder_height?n.cylinder_height*t.get("zRotate_"):t.get("cylinder_height")),new e[t.sub](t.get("sub_option"),t)},one:function(t){var n,r,i=[],s=t.get("counterclockwise"),o=function(e,t){return 1+Math.sin(t?e+Math.PI:e)},u;lay=function(t,r,i,s){u=e.quadrantd(r),(t&&(0==u||3==u)||!t&&(2==u||1==u))&&n.push({g:r,z:r==i,x:s.x,y:s.y,a:s.a,b:s.b,color:e.dark(s.get("background_color")),h:s.h,F:s})},t.proxy=new e.Custom({z_index:t.get("z_index")+1,drawFn:function(){this.drawSector(),i=[],t.sectors.each(function(e){e.get("label")&&(e.expanded?i.push(e.label):e.label.draw())}),i.each(function(e){e.draw()})}}),t.proxy.drawSector=function(){t.sectors.each(function(e){t.T.ellipse(e.x,e.y+e.h,e.a,e.b,e.get("startAngle"),e.get("endAngle"),0,e.get("border.enable"),e.get("border.width"),e.get("border.color"),e.get("shadow"),s,!0)},t),n=[],r=[],t.sectors.each(function(t){lay(s,t.get("startAngle"),t.get("endAngle"),t),lay(!s,t.get("endAngle"),t.get("startAngle"),t),r=r.concat(e.visible(t.get("startAngle"),t.get("endAngle"),t))},t),n.sor(function(e,t){var n=o(e.g)-o(t.g);return 0==n?e.z:0<n}),n.each(function(e){t.T.sector3D.layerDraw.call(t.T,e.x,e.y,e.a+.5,e.b+.5,s,e.h,e.g,e.color)},t),t.processAnimation||r.sor(function(e,t){return 0>o((e.s+e.e)/2,1)-o((t.s+t.e)/2,1)}),r.each(function(e){t.T.sector3D.sPaint.call(t.T,e.f.x,e.f.y,e.f.a,e.f.b,e.s,e.e,s,e.f.h,e.f.get("f_color"))},t),t.sectors.each(function(e){t.T.ellipse(e.x,e.y,e.a,e.b,e.get("startAngle"),e.get("endAngle"),e.get("f_color"),e.get("border.enable"),e.get("border.width"),e.get("border.color"),!1,!1,!0)},t)},t.one=e.emptyFn},doConfig:function(){e.Pie3D.superclass.doConfig.call(this);var t=this._(),n=e.angle2Radian(t.get("zRotate"));t.push("cylinder_height",t.get("yHeight")*t.push("zRotate_",Math.abs(Math.cos(n)))),t.a=t.push("sub_option.semi_major_axis",t.r),t.b=t.push("sub_option.semi_minor_axis",t.r*Math.abs(Math.sin(n))),t.topY=t.push("sub_option.originy",t.get(t.Y)-t.get("yHeight")/2),t.parse(t),t.one(t),t.components.push(t.proxy)}}),e.register("Pie3D"),e.Donut2D=e.extend(e.Pie,{configure:function(){e.Donut2D.superclass.configure.call(this),this.type="donut2d",this.set({donutwidth:.3,center:{text:"",line_height:24,fontweight:"bold",fontsize:24}})},doConfig:function(){e.Donut2D.superclass.doConfig.call(this);var t=this._(),n=t.r;t.push("sub_option.radius",n),0<t.get("donutwidth")&&(1>t.get("donutwidth")?t.push("donutwidth",Math.floor(n*t.get("donutwidth"))):t.get("donutwidth")>=n&&t.push("donutwidth",0),t.push("sub_option.donutwidth",t.get("donutwidth"))),e.isString(t.get("center"))&&t.push("center",e.applyIf({text:t.get("center")},t.default_.center)),""!=t.get("center.text")&&(t.push("center.originx",t.get(t.X)),t.push("center.originy",t.get(t.Y)),t.push("center.textBaseline","middle"),t.center=new e.Text(t.get("center"),t),t.components.push(t.center)),t.parse(t)}}),e.register("Donut2D"),e.Column=e.extend(e.Chart,{configure:function(){e.Column.superclass.configure.call(this),this.type="column",this.set({coordinate:{},column_width:void 0,column_space:void 0,text_space:6,scaleAlign:"left",sub_option:{},label:{}}),this.registerEvent(),this.rectangles=[],this.labels=[],this.components.push(this.labels),this.components.push(this.rectangles)},doAnimation:function(e,t,n){var r;n.labels.each(function(e){e.draw()}),n.rectangles.each(function(i){r=Math.ceil(n.animationArithmetic(e,0,i.height,t)),i.push(n.Y,i.y+(i.height-r)),i.push(n.H,r),i.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(t,n,r,i,s){t.labels.push(new e.Text(e.apply(t.get("label"),{id:n,text:r,originx:i,originy:s}),t))},doParse:function(e,t,n,r){e.doActing(e,t,r,n)},engine:function(e){var t=e.get("column_width"),n=e.get("column_space"),r=e.coo.getScale(e.get("scaleAlign")),i=e.coo.valid_height,s=t/2,o=t*(e.get("group_fator")||0),u="complex"!=e.dataType?t+n:e.data.length*t+n+(e.is3D()?(e.data.length-1)*o:0),a=e.coo.get("y_end"),f=a-r.basic*i-(e.is3D()?e.get("zHeight")*(e.get("bottom_scale")-1)/2*e.get("yAngle_"):0),l=n+e.coo.get("x_start"),a=a+e.get("text_space")+e.coo.get("axis.width")[2];e.doEngine(e,t,n,r,i,s,o,u,l,f,a)},doConfig:function(){e.Column.superclass.doConfig.call(this);var t=this._();t.sub=t.is3D()?"Rectangle3D":"Rectangle2D",t.rectangles.length=0,t.labels.length=0,t.rectangles.zIndex=t.get("z_index"),t.labels.zIndex=t.get("z_index")+1,t.coo=e.Coordinate.coordinate_.call(t,function(){var e=t.data.length,n=t.get("coordinate.valid_width_value"),r,i,s;"complex"==t.dataType?(s=t.get("labels").length,e=s*e+(t.is3D()?(e-1)*s*t.get("group_fator"):0),r=Math.floor(n/(s+1+e)),i=t.pushIf("column_width",r),s+=1):("stacked"==t.dataType&&(e=t.get("labels").length),r=Math.floor(2*n/(3*e+1)),i=t.pushIf("column_width",r),s=e+1),i*e>n&&(i=t.push("column_width",r)),t.push("column_space",(n-i*e)/s),t.is3D()&&(t.push("zHeight",t.get("column_width")*t.get("zScale")),t.push("sub_option.zHeight",t.get("zHeight")),t.push("sub_option.xAngle_",t.get("xAngle_")),t.push("sub_option.yAngle_",t.get("yAngle_")))}),t.push("sub_option.width",t.get("column_width"))}}),e.Column2D=e.extend(e.Column,{configure:function(){e.Column2D.superclass.configure.call(this),this.type="column2d"},doEngine:function(t,n,r,i,s,o,u,a,f,l,h){var p;t.data.each(function(n,r){p=(n.value-i.start)*s/i.distance,t.doParse(t,n,r,{id:r,originx:f+r*a,originy:l-(0<p?p:0),height:Math.abs(p)}),t.rectangles.push(new e[t.sub](t.get("sub_option"),t)),t.doLabel(t,r,n.name,f+a*r+o,h)},t)},doConfig:function(){e.Column2D.superclass.doConfig.call(this),this.engine(this)}}),e.register("Column2D"),e.Column3D=e.extend(e.Column2D,{configure:function(){e.Column3D.superclass.configure.call(this),this.type="column3d",this.dimension=e._3D,this.set({coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){e.Column3D.superclass.doConfig.call(this)}}),e.register("Column3D"),e.ColumnMulti2D=e.extend(e.Column,{configure:function(){e.ColumnMulti2D.superclass.configure.call(this),this.type="columnmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(t,n,r,i,s,o,u,a,f,l,h){var p;t.columns.each(function(o,v){o.item.each(function(r,o){p=(r.value-i.start)*s/i.distance,t.doParse(t,r,o,{id:v+"_"+o,originx:f+o*(n+u)+v*a,originy:l-(0<p?p:0),height:Math.abs(p)}),t.rectangles.push(new e[t.sub](t.get("sub_option"),t))},t),t.doLabel(t,v,o.name,f-.5*r+(v+.5)*a,h)},t)},doConfig:function(){e.ColumnMulti2D.superclass.doConfig.call(this),this.engine(this)}}),e.register("ColumnMulti2D"),e.ColumnMulti3D=e.extend(e.ColumnMulti2D,{configure:function(){e.ColumnMulti3D.superclass.configure.call(this),this.type="columnmulti3d",this.dataType="complex",this.dimension=e._3D,this.set({xAngle:60,yAngle:20,zScale:1,group_fator:.3,bottom_scale:1.4})},doConfig:function(){e.ColumnMulti3D.superclass.doConfig.call(this)}}),e.register("ColumnMulti3D"),e.ColumnStacked2D=e.extend(e.Column,{configure:function(){e.ColumnStacked2D.superclass.configure.call(this),this.type="columnstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(t,n,r,i,s,o,u,a,f,l,h){var p,d,v,m=t.get("percent");t.columns.each(function(n,o){p=0,v=m?100/n.total:1,n.item.each(function(r,u){d=(r.value*v-i.start)*s/i.distance,r.total=n.total,t.doParse(t,r,u,{id:o+"_"+u,originx:f+o*a,originy:l-(0<d?d:0)-p,height:Math.abs(d)}),p+=d,t.rectangles.push(new e[t.sub](t.get("sub_option"),t))},t),t.doLabel(t,o,n.name,f-.5*r+(o+.5)*a,h)},t)},doConfig:function(){e.ColumnStacked2D.superclass.doConfig.call(this),this.engine(this)}}),e.register("ColumnStacked2D"),e.ColumnStacked3D=e.extend(e.ColumnStacked2D,{configure:function(){e.ColumnStacked3D.superclass.configure.call(this),this.type="columnstacked3d",this.dataType="stacked",this.dimension=e._3D,this.set({percent:!1,sub_option:{label:{color:"#ffffff"},valueAlign:"middle"},coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){e.ColumnStacked3D.superclass.doConfig.call(this)}}),e.register("ColumnStacked3D"),e.Bar=e.extend(e.Chart,{configure:function(){e.Bar.superclass.configure.call(this),this.type="bar",this.set({coordinate:{striped_direction:"h"},bar_height:void 0,bar_space:void 0,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}})},getCoordinate:function(){return this.coo},doLabel:function(t,n,r,i,s){t.labels.push(new e.Text(e.apply(t.get("label"),{id:n,text:r,textAlign:"right",textBaseline:"middle",originx:i,originy:s}),t))},doParse:function(e,t,n,r){e.doActing(e,t,r,n)},engine:function(e){var t=e.get("bar_height"),n=e.get("bar_space"),r=e.coo.getScale(e.get("scaleAlign")),i=e.coo.valid_width,s=t/2,o="complex"!=e.dataType?t+n:e.data.length*t+n,u=e.coo.get("x_start")+r.basic*i,a=e.coo.get(e.X)-e.get("text_space")-e.coo.get("axis.width")[3],f=e.coo.get("y_start")+n;e.doEngine(e,t,n,r,i,s,o,u,a,f)},doAnimation:function(e,t,n){n.labels.each(function(e){e.draw()}),n.rectangles.each(function(r){r.push(n.W,Math.ceil(n.animationArithmetic(e,0,r.width,t))),r.drawRectangle()})},doConfig:function(){e.Bar.superclass.doConfig.call(this);var t=this._();t.rectangles=[],t.labels=[],t.rectangles.zIndex=t.get("z_index"),t.labels.zIndex=t.get("z_index")+1,t.components.push(t.labels),t.components.push(t.rectangles),t.coo=e.Coordinate.coordinate_.call(t,function(){var e=t.data.length,n=t.get("coordinate.valid_height_value"),r,i,s;"complex"==t.dataType?(s=t.get("labels").length,e=s*e+(t.is3D()?(e-1)*s*t.get("group_fator"):0),r=Math.floor(n/(s+1+e)),i=t.pushIf("bar_height",r),s+=1):("stacked"==t.dataType&&(e=t.get("labels").length),r=Math.floor(2*n/(3*e+1)),i=t.pushIf("bar_height",r),s=e+1),i*e>n&&(i=t.push("bar_height",r)),t.push("bar_space",(n-i*e)/s)}),t.push("sub_option.height",t.get("bar_height")),t.push("sub_option.valueAlign",t.R),t.push("sub_option.tipAlign",t.R)}}),e.Bar2D=e.extend(e.Bar,{configure:function(){e.Bar2D.superclass.configure.call(this),this.type="bar2d"},doEngine:function(t,n,r,i,s,o,u,a,f,l){var h;t.data.each(function(n,r){h=(n.value-i.start)*s/i.distance,t.doParse(t,n,r,{id:r,originy:l+r*u,width:Math.abs(h),originx:a+(0<h?0:-Math.abs(h))}),t.rectangles.push(new e.Rectangle2D(t.get("sub_option"),t)),t.doLabel(t,r,n.name,f,l+r*u+o)},t)},doConfig:function(){e.Bar2D.superclass.doConfig.call(this),this.engine(this)}}),e.register("Bar2D"),e.BarMulti2D=e.extend(e.Bar,{configure:function(){e.BarMulti2D.superclass.configure.call(this),this.type="barmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(t,n,r,i,s,o,u,a,f,l){var h;t.columns.each(function(o,v){o.item.each(function(r,o){h=(r.value-i.start)*s/i.distance,t.doParse(t,r,o,{id:v+"_"+o,originy:l+o*n+v*u,width:Math.abs(h),originx:a+(0<h?0:-Math.abs(h))}),t.rectangles.push(new e.Rectangle2D(t.get("sub_option"),t))},t),t.doLabel(t,v,o.name,f,l-.5*r+(v+.5)*u)},t)},doConfig:function(){e.BarMulti2D.superclass.doConfig.call(this),this.engine(this)}}),e.register("BarMulti2D"),e.BarStacked2D=e.extend(e.Bar,{configure:function(){e.BarStacked2D.superclass.configure.call(this),this.type="barstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(t,n,r,i,s,o,u,a,f,l){var h,p,d,v=t.get("percent");t.columns.each(function(n,o){h=0,d=v?100/n.total:1,n.item.each(function(r,f){p=(r.value*d-i.start)*s/i.distance,r.total=n.total,t.doParse(t,r,f,{id:o+"_"+f,originy:l+o*u,originx:a+(0<p?0:-Math.abs(p))+h,width:Math.abs(p)}),h+=p,t.rectangles.push(new e.Rectangle2D(t.get("sub_option"),t))},t),t.doLabel(t,o,n.name,f,l-.5*r+(o+.5)*u)},t)},doConfig:function(){e.BarStacked2D.superclass.doConfig.call(this),this.push("sub_option.valueAlign",this.C),this.engine(this)}}),e.register("BarStacked2D"),e.LineSegment=e.extend(e.Component,{configure:function(){e.LineSegment.superclass.configure.apply(this,arguments),this.type="linesegment",this.set({brushsize:1,intersection:!0,label:{},sign:"round",area_color:null,hollow:!0,hollow_inside:!0,hollow_color:"#FEFEFE",smooth:!1,smoothing:1.5,point_size:6,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0}),this.registerEvent("parseText"),this.tip=null},drawSegment:function(){var e=this._();e.polygons.each(function(t){e.T.polygon.apply(e.T,t)}),e.T.shadowOn(e.get("shadow")),e.lines.each(function(t){e.T.lineArray.apply(e.T,t)}),e.intersections.each(function(t){e.sign_plugin?e.sign_plugin_fn.apply(e,t):e.T.round0.apply(e.T,t)}),e.get("shadow")&&e.T.shadowOff()},doDraw:function(e){e.drawSegment(),e.get("label")&&e.labels.each(function(e){e.draw()})},isEventValid:function(){},tipInvoke:function(){var e=this.x,t=this.get("tip_offset"),n=this.get("point_size")+t,r=this;return function(i,s,o){var u=o.left,o=o.top,u=3>r.tipPosition&&0<u-i-e-t||2<r.tipPosition&&0>u-i-e-t?u-(i+t):u+t,o=0==r.tipPosition%2?o+n:o-s-n;return{left:u,top:o}}},PP:function(e,t,n,r,i,s){e.get("area")&&e.polygons.push([e.get("area_color")||e.get("light_color2"),0,e.get("brushsize"),0,0,e.get("area_opacity"),e.get("smooth")?t:[{x:n,y:r}].concat(t.concat([{x:i,y:s}])),e.get("smooth"),e.get("smoothing")||1.5,[{x:n,y:r},{x:i,y:s}]])},parse:function(t){t.polygons=[],t.lines=[],t.intersections=[],t.labels=[];var n=t.get("points"),r=t.get("intersection"),i=!!t.get("label"),s=[],o=!1,u=t.get("smooth"),a=t.get("smoothing")||1.5,f=t.get("f_color"),l=t.get("brushsize"),h=t.get("point_size");if(r){var p=t.getPlugin("sign"),d=f,v=t.get("hollow_color");t.sign_plugin=e.isFunction(p),t.sign_plugin_fn=p,t.get("hollow_inside")&&(d=v,v=f)}
    n.each(function(n){n.x_=n.x,n.y_=n.y,!n.ignored&&i&&(t.push("label.originx",n.x),t.push("label.originy",n.y-h/2-1),t.push("label.text",t.fireString(t,"parseText",[t,n.value],n.value)),e.applyIf(t.get("label"),{textBaseline:"bottom",color:t.get("f_color")}),t.labels.push(new e.Text(t.get("label"),t))),n.ignored&&o?(t.lines.push([s,l,f,u,a]),t.PP(t,s,s[0].x,t.y,s[s.length-1].x,t.y),s=[],o=!1):n.ignored||(s.push(n),o=!0),r&&!n.ignored&&t.intersections.push(t.sign_plugin?[t.T,t.get("sign"),n,h,n.color||d,n.hollow_color||v]:t.get("hollow")?[n,h/2-l+1,n.color||d,l+1,n.hollow_color||v]:[n,h/2,n.color||d])}),s.length&&(t.lines.push([s,l,f,u,a]),t.PP(t,s,s[0].x,t.y,s[s.length-1].x,t.y))},doConfig:function(){e.LineSegment.superclass.doConfig.call(this),e.Assert.isTrue(0<this.get("point_space"),"point_space");var t=this._(),n=3*t.get("point_size")/2,r=t.get("point_space"),i=t.get("event_range_y"),s=t.get("event_range_x"),o=t.get("tipInvokeHeap"),u=t.get("points"),a=t.get("name");t.parse(t);if(0>=s||s>r/2)s=t.push("event_range_x",r/2);0==i&&(i=t.push("event_range_y",n/2)),t.get("tip.enable")&&(t.on("mouseover",function(){o.push(t),t.tipPosition=o.length}).on("mouseout",function(){o.pop()}),t.push("tip.invokeOffsetDynamic",!0),t.tip=new e.Tip(t.get("tip"),t));var f=t.get("coordinate"),l=t.get("limit_y"),h=t.get("keep_with_coordinate"),p=function(e,t,n){return!e.ignored&&Math.abs(t-e.x)<s&&(!l||l&&Math.abs(n-e.y)<i)?!0:!1},d=function(e){return{valid:!0,name:a,value:u[e].value,text:u[e].text,top:u[e].y,left:u[e].x,i:e,hit:!0}};t.isEventValid=function(n){if(f&&!f.isEventValid(n,f).valid)return{valid:!1};var i=Math.floor((n.x-t.x)/r);if(i<0||i>=u.length-1)return i=e.between(0,u.length-1,i),p(u[i],n.x,n.y)?d(i):{valid:h};for(var s=i;s<=i+1;s++)if(p(u[s],n.x,n.y))return d(s);return{valid:h}}}}),e.Line=e.extend(e.Chart,{configure:function(){e.Line.superclass.configure.call(this),this.type="line",this.set({brushsize:1,coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},tipMocker:null,tipMockerOffset:null,scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:!0,sub_option:{},legend:{sign:"bar"},label:{}}),this.registerEvent("parsePoint"),this.lines=[],this.components.push(this.lines)},getCoordinate:function(){return this.coo},doConfig:function(){e.Line.superclass.doConfig.call(this);var t=this._(),n=1==t.data.length;t.lines.length=0,t.lines.zIndex=t.get("z_index");var r=t.pushIf("sub_option.keep_with_coordinate",n);t.get("crosshair.enable")&&(t.pushIf("crosshair.hcross",n),t.push("crosshair.invokeOffset",function(e){return e=t.lines[0].isEventValid(e),e.valid?e:r})),t.Combination||(t.push("coordinate.crosshair",t.get("crosshair")),t.pushIf("coordinate.scale",[{position:t.get("scaleAlign"),max_scale:t.get("maxValue")},{position:t.get("labelAlign"),start_scale:1,scale:1,end_scale:t.get("maxItemSize"),labels:t.get("labels"),label:t.get("label")}])),t.coo=e.Coordinate.coordinate_.call(t),t.Combination&&(t.coo.push("crosshair",t.get("crosshair")),t.coo.doCrosshair(t.coo));var i=n=t.coo.valid_width,s=t.get("maxItemSize")-1,o=n/s,u=t.get("point_space");t.get("proportional_spacing")&&(u&&u<o?i=s*u:t.push("point_space",o)),t.push("sub_option.width",i),t.push("sub_option.height",t.coo.valid_height),t.push("sub_option.originx",t.coo.get("x_start")+(n-i)/2),t.push("sub_option.originy",t.coo.get("y_end"));if(t.get("tip.enable")&&!t.mocker&&e.isFunction(t.get("tipMocker"))){t.push("sub_option.tip.enable",!1),t.push("tip.invokeOffsetDynamic",!0);var a,f=t.coo.get(t.X),l=t.coo.get(t.Y),h=t.coo.height,p=t.get("tipMockerOffset"),d,v,m,p=e.isNumber(p)?0>p?0:1<p?1:p:null;t.push("tip.invokeOffset",function(e,t,n){if(p!=null)n.top=l+(h-t)*p;else{n.top=n.maxTop-(n.maxTop-n.minTop)/3-t;if(t>h||l>n.top)n.top=l}
    return{left:n.left-e-f>5?n.left-e-5:n.left+5,top:n.top}});var g=t.get("tip.listeners.parseText");g&&delete t.get("tip.listeners").parseText,t.mocker=new e.Custom({eventValid:function(e){return v=t.lines[0].isEventValid(e),v.hit=d!=v.i,v.valid&&(d=v.i,a=[],t.lines.each(function(t,n){m=t.isEventValid(e),n==0?v.minTop=v.maxTop=m.top:(v.minTop=Math.min(v.minTop,m.top),v.maxTop=Math.max(v.maxTop,m.top)),a.push(g?g(null,m.name,m.value,m.text,m.i):m.name+" "+m.value)}),v.text=t.get("tipMocker").call(t,a,v.i)||"tipMocker not return"),v.valid?v:!1}}),new e.Tip(t.get("tip"),t.mocker),t.register(t.mocker)}
    t.pushIf("sub_option.area_opacity",t.get("area_opacity"))}}),e.LineBasic2D=e.extend(e.Line,{configure:function(){e.LineBasic2D.superclass.configure.call(this),this.type="basicline2d",this.tipInvokeHeap=[]},doAnimation:function(e,t,n){n.lines.each(function(r){r.get("points").each(function(i){i.y=r.y-Math.ceil(n.animationArithmetic(e,0,r.y-i.y_,t))}),r.drawSegment()})},doConfig:function(){e.LineBasic2D.superclass.doConfig.call(this);var t=this._(),n,r=t.coo.valid_height,i=t.get("point_space"),s,o,u,a=t.get("sub_option.originx"),f,l;t.push("sub_option.tip.showType","follow"),t.push("sub_option.coordinate",t.coo),t.push("sub_option.tipInvokeHeap",t.tipInvokeHeap),t.push("sub_option.point_space",i),t.data.each(function(h){n=t.coo.getScale(h.scaleAlign||t.get("scaleAlign")),f=t.get("sub_option.originy")-n.basic*r,s=[],h.value.each(function(v,y){o=i*y,u=(v-n.start)*r/n.distance,l={x:a+o,y:f-u,value:v,text:h.name+" "+v},e.merge(l,t.fireEvent(t,"parsePoint",[h,v,o,u,y,n])),s.push(l)},t),e.merge(t.get("sub_option"),h),t.push("sub_option.points",s),t.push("sub_option.brushsize",h.linewidth||h.line_width),t.lines.push(new e.LineSegment(t.get("sub_option"),t))},this)}}),e.register("LineBasic2D"),e.Area2D=e.extend(e.LineBasic2D,{configure:function(){e.Area2D.superclass.configure.call(this),this.type="area2d",this.set({area_opacity:.3})},doConfig:function(){this.push("sub_option.area",!0),e.Area2D.superclass.doConfig.call(this)},drawChart:function(){this.draw();var e=this.options.render;$("#"+e).wrap('<div class="mode_server-tableContainer" style="position:relative"></div>'),$("#"+e).after('<div class="mod-sever-table" id="canvasLayer" style="z-index:1001; position: absolute; top: 0; left:0"></div>'),$("#"+e).css({postion:"relative",top:0,left:0});var t=$.extend(!0,{},this.options);t.width=t.width/9,t.height=t.height/9,t.coordinate.width=t.coordinate.width/9,t.coordinate.height=t.coordinate.height/9,t.render="canvasLayer",t.id="area2d_duplicate",t.sub_option.point_size=10,t.isLayer=!0;var n=new iChart.Area2D(t);n.draw(),$("#canvasLayer canvas").css({filter:"alpha(opacity=0)","-moz-opacity":0,"-khtml-opacity":0,opacity:0})}}),e.register("Area2D")}(iChart)